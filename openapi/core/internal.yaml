components:
  responses:
    Success:
      description: success
  schemas:
    DoSEntry:
      properties:
        enable:
          description: Enable/Disable DoS defense rule
          type: boolean
        id:
          description: DoS defense entry id
          readOnly: true
          type: integer
        limit:
          description: Limit rate for DoS defense in packet per second
          type: integer
        name:
          description: DoS defense rule name
          readOnly: true
          type: string
      required:
      - id
      title: DoS Defense Configuration
    Permission:
      properties:
        description:
          description: Description of permission.
          type: string
        id:
          type: string
        name:
          description: Name of permission.
          type: string
    Role:
      properties:
        description:
          type: string
        id:
          type: integer
        name:
          type: string
        permissions:
          items:
            $ref: '#/components/schemas/Permission'
          type: array
        users:
          items:
            properties:
              id:
                type: integer
              name:
                type: string
    User:
      properties:
        changedPasswordAt:
          format: date-time
          type: string
        createdAt:
          format: date-time
          type: string
        email:
          type: string
        expiredAfter:
          format: date-time
          type: string
        id:
          type: integer
        isActive:
          type: boolean
        loginAt:
          format: date-time
          type: string
        name:
          type: string
        permissions:
          items:
            description: ID of permission
            type: string
        remindPasswordExpiredAfter:
          format: date-time
          type: string
        roles:
          items:
            properties:
              id:
                type: integer
              name:
                type: string
    Users:
      items:
        properties:
          changedPasswordAt:
            format: date-time
            type: string
          createdAt:
            format: date-time
            type: string
          email:
            type: string
          expiredAfter:
            format: date-time
            type: string
          id:
            type: integer
          isActive:
            type: boolean
          loginAt:
            format: date-time
            type: string
          name:
            type: string
          permissions:
            items:
              description: ID of permission
              type: string
          remindPasswordExpiredAfter:
            format: date-time
            type: string
          roles:
            items:
              properties:
                id:
                  type: integer
                name:
                  type: string
      type: array
    requestResource:
      properties:
        id:
          description: Resource ID
          type: integer
        value:
          description: Resource allocation argument
          type: object
    resource:
      properties:
        allocations:
          items:
            properties:
              app:
                description: App name of the allocated resource
                type: string
              value:
                description: Properties of the allocated resource
                type: object
            type: object
          type: array
        displayName:
          description: Resource Name
          readOnly: true
          type: string
        exclusive:
          readOnly: true
          type: boolean
        id:
          description: |
            Resource ID
            * 1: CPU shares
            * 2: CPU core
            * 3: memory
            * 4: forward port
            * 5: filter port
          enum:
          - 1
          - 2
          - 3
          - 4
          - 5
          readOnly: true
          type: integer
        type:
          description: Resource type
          readOnly: true
          type: string
    resourceList:
      properties:
        count:
          description: Array length.
          type: integer
        data:
          items:
            $ref: '#/components/schemas/resource'
          type: array
      title: All current allocated resources
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      scheme: bearer
      type: http
info:
  title: Core
  version: 2.2.0
openapi: 3.0.0
paths:
  /_/health:
    get:
      description: Overall system health
      responses:
        200:
          content:
            text/plain:
              example: ready
              schema:
                type: string
          description: return one of "init", "starting", "ready", "stopping"
      servers:
      - url: http://127.0.0.1:59000/api
      tags:
      - systems
  /_/ping:
    get:
      description: ping pong test
      responses:
        200:
          content:
            application/json:
              example:
                data: pong
          description: success
      security: []
      servers:
      - url: http://127.0.0.1:59000/api
      tags:
      - systems
  /_/welcome:
    get:
      description: Information for welcome page
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  eulaAccepted: true
                  message: ""
                  modelName: UC-8100A-ME-T-LX
                  state: normal
                  stateInternal: ready
              schema:
                properties:
                  data:
                    properties:
                      eulaAccepted:
                        description: whether user accepted EULA
                        type: boolean
                      modelName:
                        type: string
                      state:
                        enum:
                        - normal
                        - upgrade
                        type: string
                      stateInternal:
                        enum:
                        - init
                        - starting
                        - ready
                        - stopping
                        type: string
          description: success
      security: []
      servers:
      - url: http://127.0.0.1:59000/api
      tags:
      - systems
  /apps:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 5
                data:
                - arch: armhf
                  attributes:
                  - started
                  - installed
                  availableVersions: []
                  category: device
                  description: MOXA hardware service
                  desiredState: ready
                  displayName: Device
                  hardwares: []
                  health: wait
                  icon: /app-icons/device.png
                  id: device
                  imageSize: 86970368
                  license:
                    paid: false
                    type: propetual
                  menuID: app-device
                  name: device
                  state: starting
                  version: 1.0.0-284-uc-8112a-me
                - arch: armhf
                  attributes:
                  - started
                  - installed
                  availableVersions: []
                  category: cloud
                  description: Azure IoT Edge
                  desiredState: ready
                  displayName: Azure IoT Edge
                  hardwares: []
                  health: wait
                  icon: ""
                  id: aie
                  imageSize: 71293440
                  license:
                    paid: true
                    type: free
                  menuID: app-aie
                  name: aie
                  state: starting
                  version: 0.3.1-52
                - arch: armhf
                  attributes:
                  - openInSameTab
                  availableVersions: []
                  category: protocol
                  description: MOXA Modbus TCP Client (Master)
                  desiredState: ready
                  displayName: Modbus TCP Client (Master)
                  hardwares: []
                  health: wait
                  icon: /app-icons/modbusmaster-tcp.png
                  id: modbusmaster-tcp
                  imageSize: 61130240
                  license:
                    paid: true
                    type: free
                  menuID: app-modbusmaster-tcp
                  name: modbusmaster-tcp
                  state: starting
                  version: 3.14.0-278
                - arch: armhf
                  attributes:
                  - installed
                  - started
                  - hide
                  availableVersions: []
                  category: intelligence
                  description: |
                    ThingsPro frontend web application
                  desiredState: ready
                  displayName: ThingsPro Edge Web
                  hardwares: []
                  health: good
                  icon: ""
                  id: edge-web
                  imageSize: 0
                  license:
                    paid: true
                    type: free
                  menuID: app-edge-web
                  name: edge-web
                  state: ready
                  version: 0.28.0-322
                - arch: armhf
                  attributes:
                  - installed
                  - started
                  - openInSameTab
                  availableVersions: []
                  category: intelligence
                  description: |
                    ThingsPro Tag Framework Core
                  desiredState: ready
                  displayName: Tag Service
                  hardwares: []
                  health: running
                  icon: ""
                  id: tagservice
                  imageSize: 84914688
                  license:
                    paid: true
                    type: free
                  menuID: app-tagservice
                  name: tagservice
                  state: starting
                  version: 1.5.0-168
              schema:
                properties:
                  data:
                    items:
                      properties:
                        arch:
                          enum:
                          - armhf
                          - amd64
                          type: string
                        attributes:
                          items:
                            enum:
                            - started
                            - installed
                            - hide
                            - openInNewTab
                            - openInSameTab
                            type: string
                          type: array
                        availableVersions:
                          description: version can be installed from MPKG site(source)
                          items:
                            type: string
                          type: array
                        description:
                          type: string
                        displayName:
                          type: string
                        error:
                          description: this field is appear if error happened
                          type: string
                        hardware:
                          description: hardware required for this APP
                          items:
                            type: string
                          type: array
                        health:
                          enum:
                          - wait
                          - good
                          - running
                          - error
                          type: string
                        icon:
                          description: URL of the icon
                          type: string
                        id:
                          description: internal and unique APP name
                          type: string
                        imageSize:
                          type: integer
                        license:
                          properties:
                            paid:
                              type: boolean
                            type:
                              description: type of license
                              enum:
                              - propetual
                              - free
                              type: string
                          type: object
                        menuID:
                          description: ID of menu
                          type: string
                        name:
                          description: internal and unique APP name
                          type: string
                        progress:
                          description: this field is appear if progress is available
                          properties:
                            currentTask:
                              description: current running subtask number starting
                                from 1
                              type: integer
                            message:
                              type: string
                            percentage:
                              description: current subtask finish percentage from
                                0 to 100
                              type: integer
                            totalTask:
                              description: total subtask
                              type: integer
                          type: object
                        state:
                          enum:
                          - init
                          - uninstalled
                          - installing
                          - stopped
                          - starting
                          - ready
                          - restarting
                          - stopping
                          - uninstalling
                          - recovering
                          type: string
                        version:
                          type: string
                    type: array
          description: success
      summary: Return all APPs
      tags:
      - apps
    post:
      description: You may either upload MPKG binary directly or give an URL.
      requestBody:
        content:
          multipart/form-data:
            schema:
              description: given either `mpkg` or `url`
              properties:
                mpkg:
                  format: binary
                  type: string
                url:
                  type: string
              type: object
        description: The uploaded file data.
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  arch: armhf
                  attributes:
                  - installed
                  - started
                  - openInSameTab
                  availableVersions: []
                  category: intelligence
                  description: |
                    ThingsPro Tag Framework Core
                  desiredState: ready
                  displayName: Tag Service
                  hardwares: []
                  health: good
                  icon: ""
                  id: tagservice
                  imageSize: 84914688
                  license:
                    paid: true
                    type: free
                  name: tagservice
                  state: ready
                  version: 1.5.0-168
              schema:
                properties:
                  data:
                    properties:
                      arch:
                        enum:
                        - armhf
                        - amd64
                        type: string
                      attributes:
                        items:
                          enum:
                          - started
                          - installed
                          - hide
                          - openInNewTab
                          - openInSameTab
                          type: string
                        type: array
                      availableVersions:
                        description: version can be installed from MPKG site(source)
                        items:
                          type: string
                        type: array
                      description:
                        type: string
                      displayName:
                        type: string
                      error:
                        description: this field is appear if error happened
                        type: string
                      hardware:
                        description: hardware required for this APP
                        items:
                          type: string
                        type: array
                      health:
                        enum:
                        - wait
                        - good
                        - running
                        - error
                        type: string
                      icon:
                        description: URL of the icon
                        type: string
                      id:
                        description: internal and unique APP name
                        type: string
                      imageSize:
                        type: integer
                      license:
                        properties:
                          paid:
                            type: boolean
                          type:
                            description: type of license
                            enum:
                            - propetual
                            - free
                            type: string
                        type: object
                      menuID:
                        description: ID of menu
                        type: string
                      name:
                        description: internal and unique APP name
                        type: string
                      progress:
                        description: this field is appear if progress is available
                        properties:
                          currentTask:
                            description: current running subtask number starting from
                              1
                            type: integer
                          message:
                            type: string
                          percentage:
                            description: current subtask finish percentage from 0
                              to 100
                            type: integer
                          totalTask:
                            description: total subtask
                            type: integer
                        type: object
                      state:
                        enum:
                        - init
                        - uninstalled
                        - installing
                        - stopped
                        - starting
                        - ready
                        - restarting
                        - stopping
                        - uninstalling
                        - recovering
                        type: string
                      version:
                        type: string
          description: success
      summary: Install APP
      tags:
      - apps
  /apps/{appname}:
    get:
      parameters:
      - description: name of APP
        in: path
        name: appname
        required: true
        schema:
          type: string
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  arch: armhf
                  attributes:
                  - installed
                  - started
                  - openInSameTab
                  availableVersions: []
                  category: intelligence
                  description: |
                    ThingsPro Tag Framework Core
                  desiredState: ready
                  displayName: Tag Service
                  hardwares: []
                  health: good
                  icon: ""
                  id: tagservice
                  imageSize: 84914688
                  license:
                    paid: true
                    type: free
                  name: tagservice
                  state: ready
                  version: 1.5.0-168
              schema:
                properties:
                  data:
                    properties:
                      arch:
                        enum:
                        - armhf
                        - amd64
                        type: string
                      attributes:
                        items:
                          enum:
                          - started
                          - installed
                          - hide
                          - openInNewTab
                          - openInSameTab
                          type: string
                        type: array
                      availableVersions:
                        description: version can be installed from MPKG site(source)
                        items:
                          type: string
                        type: array
                      description:
                        type: string
                      displayName:
                        type: string
                      error:
                        description: this field is appear if error happened
                        type: string
                      hardware:
                        description: hardware required for this APP
                        items:
                          type: string
                        type: array
                      health:
                        enum:
                        - wait
                        - good
                        - running
                        - error
                        type: string
                      icon:
                        description: URL of the icon
                        type: string
                      id:
                        description: internal and unique APP name
                        type: string
                      imageSize:
                        type: integer
                      license:
                        properties:
                          paid:
                            type: boolean
                          type:
                            description: type of license
                            enum:
                            - propetual
                            - free
                            type: string
                        type: object
                      menuID:
                        description: ID of menu
                        type: string
                      name:
                        description: internal and unique APP name
                        type: string
                      progress:
                        description: this field is appear if progress is available
                        properties:
                          currentTask:
                            description: current running subtask number starting from
                              1
                            type: integer
                          message:
                            type: string
                          percentage:
                            description: current subtask finish percentage from 0
                              to 100
                            type: integer
                          totalTask:
                            description: total subtask
                            type: integer
                        type: object
                      state:
                        enum:
                        - init
                        - uninstalled
                        - installing
                        - stopped
                        - starting
                        - ready
                        - restarting
                        - stopping
                        - uninstalling
                        - recovering
                        type: string
                      version:
                        type: string
          description: success
      summary: Find APP by name
      tags:
      - apps
  /apps/{appname}/{action}:
    put:
      parameters:
      - description: name of APP
        in: path
        name: appname
        required: true
        schema:
          type: string
      - in: path
        name: action
        required: true
        schema:
          enum:
          - start
          - stop
          - install
          - uninstall
          - restart
          type: string
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  arch: armhf
                  attributes:
                  - installed
                  - started
                  - openInSameTab
                  availableVersions: []
                  category: intelligence
                  description: |
                    ThingsPro Tag Framework Core
                  desiredState: ready
                  displayName: Tag Service
                  hardwares: []
                  health: good
                  icon: ""
                  id: tagservice
                  imageSize: 84914688
                  license:
                    paid: true
                    type: free
                  name: tagservice
                  state: ready
                  version: 1.5.0-168
              schema:
                properties:
                  data:
                    properties:
                      arch:
                        enum:
                        - armhf
                        - amd64
                        type: string
                      attributes:
                        items:
                          enum:
                          - started
                          - installed
                          - hide
                          - openInNewTab
                          - openInSameTab
                          type: string
                        type: array
                      availableVersions:
                        description: version can be installed from MPKG site(source)
                        items:
                          type: string
                        type: array
                      description:
                        type: string
                      displayName:
                        type: string
                      error:
                        description: this field is appear if error happened
                        type: string
                      hardware:
                        description: hardware required for this APP
                        items:
                          type: string
                        type: array
                      health:
                        enum:
                        - wait
                        - good
                        - running
                        - error
                        type: string
                      icon:
                        description: URL of the icon
                        type: string
                      id:
                        description: internal and unique APP name
                        type: string
                      imageSize:
                        type: integer
                      license:
                        properties:
                          paid:
                            type: boolean
                          type:
                            description: type of license
                            enum:
                            - propetual
                            - free
                            type: string
                        type: object
                      menuID:
                        description: ID of menu
                        type: string
                      name:
                        description: internal and unique APP name
                        type: string
                      progress:
                        description: this field is appear if progress is available
                        properties:
                          currentTask:
                            description: current running subtask number starting from
                              1
                            type: integer
                          message:
                            type: string
                          percentage:
                            description: current subtask finish percentage from 0
                              to 100
                            type: integer
                          totalTask:
                            description: total subtask
                            type: integer
                        type: object
                      state:
                        enum:
                        - init
                        - uninstalled
                        - installing
                        - stopped
                        - starting
                        - ready
                        - restarting
                        - stopping
                        - uninstalling
                        - recovering
                        type: string
                      version:
                        type: string
          description: success
      summary: Operate an APP
      tags:
      - apps
  /auth:
    get:
      description: This API returns wether authentication token in header is valid
        by HTTP status code
      responses:
        200:
          content:
            application/json:
              example:
                data: ok
          description: success
        401:
          description: unauthorized
      summary: Get authentication status
      tags:
      - authentication
    post:
      requestBody:
        content:
          application/json:
            example:
              acceptEULA: true
              name: admin
              password: moxa1234
            schema:
              properties:
                acceptEULA:
                  type: boolean
                name:
                  type: string
                password:
                  type: string
              required:
              - name
              - password
              type: object
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  message: hello
                  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6InRlc3QiLCJpYXQiOjE1NjM0MjA5MTQsImV4cCI6NDcxNzAyMDkxNH0.7oGA1VHBingnzeG7hHgWEiZ4JmoserFguyeb7_GUK6E
                  user:
                    changedPasswordAt: null
                    email: null
                    expiredAfter: null
                    id: 1
                    isActive: true
                    loginAt: "0001-01-01T00:00:00Z"
                    name: admin
                    permissions:
                    - SYS_MAINTENANCE_RW
                    - SYS_USER_RW
                    remindPasswordExpiredAfter: null
                    roles:
                    - id: 1
                      name: Administrator
              schema:
                properties:
                  data:
                    properties:
                      message:
                        description: message of login successfully
                        type: string
                      token:
                        type: string
                      user:
                        $ref: '#/components/schemas/User'
          description: success
        401:
          content:
            application/json:
              examples:
                eula:
                  summary: EULA
                  value:
                    error:
                      code: 401
                      message: You must accept EULA before sigin
                unauth:
                  summary: unauthorized
                  value:
                    error:
                      code: 401
                      message: The account or password you entered is not correct.
                        (Your account will be temporarily locked if excessive tried)
          description: unauthorized
      security: []
      summary: Sign in
      tags:
      - authentication
  /auth/eula:
    get:
      parameters:
      - description: output format
        in: query
        name: format
        required: true
        schema:
          default: json+html
          enum:
          - json+html
          - json+text
          - text
          type: string
      responses:
        200:
          content:
            application/json:
              example: |
                {"data":"\u003cdiv class=\"terms-of-service\"\u003e\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv class=\"hero-banner\"\u003e\n\t\u003ch2 class=\"hero-banner__heading text--center\"\u003eMoxa End-User License Agreement For ThingsPro Edge\u003c/h2\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv class=\"module-block\"\u003e\n\t\u003ch4 class=\"module-block__note-heading\"\u003eLast Update: Dec 15, 2020\u003c/h4\u003e\n\t\u003cp class=\"module-block__paragraph\"\u003e\n\t  This Moxa End-User License Agreement (“Agreement”) governs your use of ThingsPro Edge (“Software”) provided by Moxa Inc., or any one of its subsidiaries or affiliated companies (collectively referred to as “Moxa\"). Installing or using any part of the Software indicates your acceptance of this Agreement. If you do not agree to this Agreement, you must immediately cease using any part of the Software along with all related documentation, if any, and return them with your receipt to the place you obtained them. Moxa reserves the right to change, modify, add or delete provisions in this Agreement.\n\t\u003c/p\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv class=\"ellipsis-accordion\"\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eLICENSE\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  Subject to the terms of this Agreement, Moxa grants you a limited, revocable, non-exclusive, non-sublicensable, and non-transferrable license to access and use the Software solely for monitoring and managing the use of Moxa products and in accordance with this Agreement. Except as provided herein, you obtain no rights under this Agreement from Moxa, Moxa’s affiliates or Moxa’s licensors to the Software, including any related intellectual property rights. Some software (including machine images), data, text, audio, video or images may be provided to you under a separate license (“Third-Party Content”), such as the Apache License, Version 2.0, or other open source license. In the event of a conflict between this Agreement and any separate license, the separate license will prevail with respect to such Third-Party Content that is the subject of such separate license.\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eLIMITATIONS OF USE\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  You shall not use the Software in any manner or for any purpose other than as expressly permitted by this Agreement. You shall not (a) modify, distribute, alter, tamper with, repair, or otherwise create derivative works of the Software (except to the extent Third-Party Content included in the Software is provided to you under a separate license that expressly permits the creation of derivative works), (b) reverse engineer, disassemble, or decompile the Software or apply any other process or procedure to derive the source code of the Software, or (c) resell, sublicense, assign, or otherwise transfer the Software or related documentation.\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eRESPONSIBILITIES\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  Except to the extent caused by Moxa’s breach of this Agreement, (a) you are responsible for all activities that occur under your account and accounts created and/or authorized by you, regardless of whether the activities are authorized by you or undertaken by you, your employees or a third party (including your contractors, agents or end users), and (b) Moxa and its affiliates are not responsible for unauthorized access to your account or accounts created and/or authorized by you. You shall notify Moxa immediately of any unauthorized use of any password or account or any other known or suspected breach of security, and use reasonable efforts to stop such unauthorized use.\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eINDEMNIFICATION\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  You will defend, indemnify, and hold harmless Moxa, its affiliates and licensors, and each of their respective employees, officers, directors, and representatives from and against any damage or loss arising out of or relating to any third-party claim concerning: (a) your use of the Software, or (b) breach of this Agreement or violation of applicable law by you. You will reimburse Moxa for reasonable attorneys’ fees, as well as its employees’ and contractors’ time and materials spent responding to any third party subpoena or other compulsory legal order or process associated with third party claims described in (a) and (b) above.\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eLIMITED WARRANTY\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  THE SOFTWARE ARE PROVIDED “AS IS.” EXCEPT TO THE EXTENT PROHIBITED BY LAW, OR TO THE EXTENT ANY STATUTORY RIGHTS APPLY THAT CANNOT BE EXCLUDED, LIMITED OR WAIVED, MOXA AND ITS AFFILIATES AND LICENSORS (A) MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, WHETHER EXPRESS, IMPLIED, STATUTORY OR OTHERWISE REGARDING THE SOFTWARE, AND (B) DISCLAIM ALL WARRANTIES, INCLUDING ANY IMPLIED OR EXPRESS WARRANTIES (I) OF MERCHANTABILITY, SATISFACTORY QUALITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR QUIET ENJOYMENT, (II) ARISING OUT OF ANY COURSE OF DEALING OR USAGE OF TRADE, AND (III) THAT THE SOFTWARE WILL BE UNINTERRUPTED, ERROR FREE OR FREE OF HARMFUL COMPONENTS\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eLIMITATION OF LIABILITY\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  MOXA AND ITS AFFILIATES AND LICENSORS WILL NOT BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR EXEMPLARY DAMAGES (INCLUDING DAMAGES FOR LOSS OF PROFITS, REVENUES, CUSTOMERS, OPPORTUNITIES, GOODWILL, USE, OR DATA), EVEN IF A PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FURTHER, NEITHER MOXA NOR ANY OF ITS AFFILIATES OR LICENSORS WILL BE RESPONSIBLE FOR ANY COMPENSATION, REIMBURSEMENT, OR DAMAGES ARISING IN CONNECTION WITH: (A) YOUR INABILITY TO USE THE SOFTWARE; (B) THE COST OF PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; (C) ANY INVESTMENTS, EXPENDITURES, OR COMMITMENTS BY YOU IN CONNECTION WITH THIS AGREEMENT OR YOUR USE OF THE SOFTWARE; OR (D) ANY UNAUTHORIZED ACCESS TO, ALTERATION OF, OR THE DELETION, DESTRUCTION, DAMAGE, LOSS OR FAILURE TO STORE ANY OF YOUR DATA. IN ANY CASE, MOXA AND ITS AFFILIATES’ AND LICENSORS’ AGGREGATE LIABILITY UNDER THIS AGREEMENT WILL NOT EXCEED THE AMOUNT PAID BY YOU TO MOXA FOR THE SOFTWAR. THE LIMITATIONS IN THIS SECTION APPLY ONLY TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eTERM AND TERMINATION\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  You may terminate this Agreement at any time by destroying the Software and related documentation and the authorized backup copy. Moxa may terminate this Agreement for any reason by providing you at least 30 days’ advance notice. Moxa may also terminate this Agreement immediately upon notice to you if (a) Moxa’s relationship with a third-party partner who provides software or other technology for Moxa to provide the Software expires, terminates or requires Moxa to change the way it provide the software or other technology as part of the Software, or (b) in order to comply with the law or requests of governmental entities. Either party may terminate this Agreement for cause if the other party is in material breach of this Agreement and the material breach remains uncured for a period of 30 days from receipt of notice by the other party. Any terms and conditions of this Agreement that by their nature or otherwise reasonably should survive termination, cancellation or other expiry of this Agreement shall survive any termination, cancellation or other expiry of this Agreement\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003eGOVERNING LAW\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  This Agreement shall be governed and interpreted in accordance with the laws of Taiwan, without giving effect to choice of law principles. Any disputes arising under or in connection with this Agreement shall be subject to the venue and jurisdiction of Taipei District Court, Taiwan as the court of first instance\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"ellipsis-accordion__block\"\u003e\n\t  \u003ch3 class=\"ellipsis-accordion__heading\"\u003ePRIVACY STATEMENT\u003c/h3\u003e\n\t  \u003cdiv class=\"ellipsis-accordion__wrap\"\u003e\n\t\t\u003cp class=\"ellipsis-accordion__wrap__paragraph-no-counter\"\u003e\n\t\t  Moxa implements reasonable and appropriate measures designed to protect the security and privacy of your personal data. Please review Moxa Privacy Statement on Moxa’s website: \u003ca href=\"https://www.moxa.com/en/privacy-policy\"\u003ehttps://www.moxa.com/en/privacy-policy\u003c/a\u003e, which governs the use of personal data. All internet use is subject to security vulnerabilities. You shall implement all necessary security measures to ensure the protection and privacy of personal information and to protect the Software\n\t\t\u003c/p\u003e\n\t  \u003c/div\u003e\n\t\u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cfooter class=\"footer\"\u003e\n  \u003cdiv class=\"container\"\u003e\n\t\u003cp class=\"footer__copyright\"\u003e@ 2020 Moxa Inc. All rights reserved.\u003c/p\u003e\n  \u003c/div\u003e\n\u003c/footer\u003e\n\u003c/div\u003e\n"}
            text/plain:
              example: |
                Moxa End-User License Agreement For ThingsPro Edge

                Last Update: Dec 15, 2020

                This Moxa End-User License Agreement (“Agreement”) governs your use of ThingsPro Edge (“Software”) provided by Moxa Inc., or any one of its subsidiaries or affiliated companies (collectively referred to as “Moxa"). Installing or using any part of the Software indicates your acceptance of this Agreement. If you do not agree to this Agreement, you must immediately cease using any part of the Software along with all related documentation, if any, and return them with your receipt to the place you obtained them. Moxa reserves the right to change, modify, add or delete provisions in this Agreement.

                LICENSE

                Subject to the terms of this Agreement, Moxa grants you a limited, revocable, non-exclusive, non-sublicensable, and non-transferrable license to access and use the Software solely for monitoring and managing the use of Moxa products and in accordance with this Agreement. Except as provided herein, you obtain no rights under this Agreement from Moxa, Moxa’s affiliates or Moxa’s licensors to the Software, including any related intellectual property rights. Some software (including machine images), data, text, audio, video or images may be provided to you under a separate license (“Third-Party Content”), such as the Apache License, Version 2.0, or other open source license. In the event of a conflict between this Agreement and any separate license, the separate license will prevail with respect to such Third-Party Content that is the subject of such separate license.

                LIMITATIONS OF USE

                You shall not use the Software in any manner or for any purpose other than as expressly permitted by this Agreement. You shall not (a) modify, distribute, alter, tamper with, repair, or otherwise create derivative works of the Software (except to the extent Third-Party Content included in the Software is provided to you under a separate license that expressly permits the creation of derivative works), (b) reverse engineer, disassemble, or decompile the Software or apply any other process or procedure to derive the source code of the Software, or (c) resell, sublicense, assign, or otherwise transfer the Software or related documentation.

                RESPONSIBILITIES

                Except to the extent caused by Moxa’s breach of this Agreement, (a) you are responsible for all activities that occur under your account and accounts created and/or authorized by you, regardless of whether the activities are authorized by you or undertaken by you, your employees or a third party (including your contractors, agents or end users), and (b) Moxa and its affiliates are not responsible for unauthorized access to your account or accounts created and/or authorized by you. You shall notify Moxa immediately of any unauthorized use of any password or account or any other known or suspected breach of security, and use reasonable efforts to stop such unauthorized use.

                INDEMNIFICATION

                You will defend, indemnify, and hold harmless Moxa, its affiliates and licensors, and each of their respective employees, officers, directors, and representatives from and against any damage or loss arising out of or relating to any third-party claim concerning: (a) your use of the Software, or (b) breach of this Agreement or violation of applicable law by you. You will reimburse Moxa for reasonable attorneys’ fees, as well as its employees’ and contractors’ time and materials spent responding to any third party subpoena or other compulsory legal order or process associated with third party claims described in (a) and (b) above.

                LIMITED WARRANTY

                THE SOFTWARE ARE PROVIDED “AS IS.” EXCEPT TO THE EXTENT PROHIBITED BY LAW, OR TO THE EXTENT ANY STATUTORY RIGHTS APPLY THAT CANNOT BE EXCLUDED, LIMITED OR WAIVED, MOXA AND ITS AFFILIATES AND LICENSORS (A) MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, WHETHER EXPRESS, IMPLIED, STATUTORY OR OTHERWISE REGARDING THE SOFTWARE, AND (B) DISCLAIM ALL WARRANTIES, INCLUDING ANY IMPLIED OR EXPRESS WARRANTIES (I) OF MERCHANTABILITY, SATISFACTORY QUALITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR QUIET ENJOYMENT, (II) ARISING OUT OF ANY COURSE OF DEALING OR USAGE OF TRADE, AND (III) THAT THE SOFTWARE WILL BE UNINTERRUPTED, ERROR FREE OR FREE OF HARMFUL COMPONENTS

                LIMITATION OF LIABILITY

                MOXA AND ITS AFFILIATES AND LICENSORS WILL NOT BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR EXEMPLARY DAMAGES (INCLUDING DAMAGES FOR LOSS OF PROFITS, REVENUES, CUSTOMERS, OPPORTUNITIES, GOODWILL, USE, OR DATA), EVEN IF A PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FURTHER, NEITHER MOXA NOR ANY OF ITS AFFILIATES OR LICENSORS WILL BE RESPONSIBLE FOR ANY COMPENSATION, REIMBURSEMENT, OR DAMAGES ARISING IN CONNECTION WITH: (A) YOUR INABILITY TO USE THE SOFTWARE; (B) THE COST OF PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; (C) ANY INVESTMENTS, EXPENDITURES, OR COMMITMENTS BY YOU IN CONNECTION WITH THIS AGREEMENT OR YOUR USE OF THE SOFTWARE; OR (D) ANY UNAUTHORIZED ACCESS TO, ALTERATION OF, OR THE DELETION, DESTRUCTION, DAMAGE, LOSS OR FAILURE TO STORE ANY OF YOUR DATA. IN ANY CASE, MOXA AND ITS AFFILIATES’ AND LICENSORS’ AGGREGATE LIABILITY UNDER THIS AGREEMENT WILL NOT EXCEED THE AMOUNT PAID BY YOU TO MOXA FOR THE SOFTWAR. THE LIMITATIONS IN THIS SECTION APPLY ONLY TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW

                TERM AND TERMINATION

                You may terminate this Agreement at any time by destroying the Software and related documentation and the authorized backup copy. Moxa may terminate this Agreement for any reason by providing you at least 30 days’ advance notice. Moxa may also terminate this Agreement immediately upon notice to you if (a) Moxa’s relationship with a third-party partner who provides software or other technology for Moxa to provide the Software expires, terminates or requires Moxa to change the way it provide the software or other technology as part of the Software, or (b) in order to comply with the law or requests of governmental entities. Either party may terminate this Agreement for cause if the other party is in material breach of this Agreement and the material breach remains uncured for a period of 30 days from receipt of notice by the other party. Any terms and conditions of this Agreement that by their nature or otherwise reasonably should survive termination, cancellation or other expiry of this Agreement shall survive any termination, cancellation or other expiry of this Agreement

                GOVERNING LAW

                This Agreement shall be governed and interpreted in accordance with the laws of Taiwan, without giving effect to choice of law principles. Any disputes arising under or in connection with this Agreement shall be subject to the venue and jurisdiction of Taipei District Court, Taiwan as the court of first instance

                PRIVACY STATEMENT

                Moxa implements reasonable and appropriate measures designed to protect the security and privacy of your personal data. Please review Moxa Privacy Statement on Moxa’s website: https://www.moxa.com/en/privacy-policy, which governs the use of personal data. All internet use is subject to security vulnerabilities. You shall implement all necessary security measures to ensure the protection and privacy of personal information and to protect the Software

                @ 2020 Moxa Inc. All rights reserved.
          description: success
      summary: Get EULA
      tags:
      - authentication
  /auth/refresh:
    put:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJJRCI6MSwiUm9sZUlEIjoxLCJleHAiOjE1NjM2MTIxNjJ9.CaKmYYCyFXvWXZN0ZXO7dNk_9tBlhNaB9LIMX4bCujY
          description: success
        401:
          description: unauthorized
      summary: Refresh authentication token
      tags:
      - authentication
  /auth/revoke:
    put:
      responses:
        200:
          content:
            application/json:
              example:
                data: ok
          description: success
        401:
          description: unauthorized
      summary: Revoke authentication token
      tags:
      - authentication
  /auth/websocket-token:
    get:
      description: The token one-shot authentication for websocket only and valid
        in 30 seconds
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJJRCI6MSwiUm9sZUlEIjoxLCJleHAiOjE1NjM2MTIxNjJ9.CaKmYYCyFXvWXZN0ZXO7dNk_9tBlhNaB9LIMX4bCujY
          description: success
        401:
          description: unauthorized
      summary: Get websocket token
      tags:
      - authentication
  /devicedb:
    delete:
      responses:
        200:
          description: success
      summary: delete all devices to DB
      tags:
      - devicedb
    get:
      parameters:
      - in: query
        name: type
        schema:
          type: string
      responses:
        200:
          content:
            application/json:
              schema:
                example:
                  count: 3
                  data:
                  - id: 1
                    ip: 1.2.3.4
                    type: type1
                  - domainName: ""
                    domainNameServers:
                    - 8.8.8.8
                    - 8.8.4.4
                    enable: false
                    endIp: 192.168.4.250
                    id: 2
                    interface: eth1
                    leaseTime: 3600
                    netmask: 255.255.255.0
                    startIp: 192.168.4.200
                    status: false
                    type: dhcpd
                  - domainName: ""
                    domainNameServers:
                    - 8.8.8.8
                    - 8.8.4.4
                    enable: false
                    endIp: 192.168.3.250
                    id: 1
                    interface: eth0
                    leaseTime: 3600
                    netmask: 255.255.255.0
                    startIp: 192.168.3.200
                    status: false
                    type: dhcpd
                properties:
                  count:
                    description: data length
                  data:
                    description: device object
                    items:
                      properties:
                        id:
                          type: integer
                        type:
                          type: string
                      type: object
                    type: array
          description: success
      summary: get devices from DB
      tags:
      - devicedb
    post:
      requestBody:
        content:
          application/json:
            example:
            - field1: true
              field2: ashley
              id: 1
              type: mytype
            schema:
              description: device objects
              items:
                properties:
                  id:
                    type: integer
                  type:
                    type: string
                type: object
              type: array
        required: true
      responses:
        200:
          description: success
      summary: create or update devices to DB
      tags:
      - devicedb
  /devicedb/{type}/{id}:
    delete:
      parameters:
      - description: device type
        in: path
        name: type
        required: true
        schema:
          type: string
      - description: device ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        200:
          description: success
      summary: delete one device to DB
      tags:
      - devicedb
  /events:
    delete:
      responses:
        204:
          description: success
      summary: Clear event logs
      tags:
      - event
    get:
      parameters:
      - description: Limit the number of result (default:100).
        in: query
        name: limit
        schema:
          type: integer
      - description: Log starting from the offset (default:0).
        in: query
        name: offset
        schema:
          type: integer
      - description: Order by key (default:time).
        in: query
        name: order
        schema:
          enum:
          - time
          - category
          - eventName
          type: string
      - description: sorting (default:desc).
        in: query
        name: sort
        schema:
          enum:
          - asc
          - desc
          type: string
      - description: Match by category which keywords seperated by comma(,)
        in: query
        name: categories
        schema:
          type: string
      - description: Matcy by event name which keywords seperated by comma(,)
        in: query
        name: eventNames
        schema:
          type: string
      - description: Filter out by severity which keywords seperated by comma(,)
        in: query
        name: severities
        schema:
          type: string
      - description: Get the specified service of logs.
        in: query
        name: origins
        schema:
          items:
            type: string
          type: array
      - description: Enable server-sent event (Value is always true if having this
          field).
        in: query
        name: event
        schema:
          type: boolean
      - description: Download event as zip file (Value is always true if having this
          field).
        in: query
        name: download
        schema:
          type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                count: 2
                data:
                - category: system
                  createdAt: "2020-02-25T00:08:54.97510268+08:00"
                  event: software installation completed
                  id: 20340
                  message: aaaaaaaaaaa bbbbbbbbbb ccccccccccc
                  origin: system
                  severity: info
                  user: admin
                  userOrigin: 10.144.49.123
                - category: system
                  createdAt: "2020-02-25T00:08:54.92855576+08:00"
                  event: software installation completed
                  id: 20339
                  message: aaaaaaaaaaa bbbbbbbbbb ccccccccccc
                  origin: system
                  severity: info
                  user: admin
                  userOrigin: 10.144.49.123
                limit: 2
                offset: 0
                total: 14154
              schema:
                properties:
                  data:
                    properties:
                      category:
                        description: Event category
                        type: string
                      createdAt:
                        description: Event time in RFC3339 format (default:now).
                        type: string
                      event:
                        description: Event message
                        type: string
                      message:
                        description: Event message in detail
                        type: string
                      origin:
                        description: Which service/APP publish the event
                        type: string
                      severity:
                        description: Event severity (default:info).
                        enum:
                        - alert
                        - warning
                        - info
                        type: string
                      user:
                        description: Username who trigger the event
                        type: string
                      userOrigin:
                        description: User comes from. It's normally an IP address.
                        type: string
            application/zip:
              schema:
                format: binary
                type: string
            text/event-stream:
              example: |
                : connected

                id:137
                event:message
                data:{"id":137,"severity":"info","origin":"system","event":"App Start","category":"system","message":"Application started: Cloud Application","createdAt":"2020-02-12T01:09:06.60498948+08:00","user":""}

                id:136
                event:message
                data:{"id":136,"severity":"warning","origin":"system","event":"App Stop","category":"system","message":"Application stopped: Cloud Application","createdAt":"2020-02-12T01:08:50.2650116+08:00","user":""}
          description: success
      summary: Get events
      tags:
      - event
    post:
      requestBody:
        content:
          application/json:
            example:
              category: system
              event: software installation completed
              message: 'Installation completed. Job id: 1, software name: update-123'
              origin: system
              severity: info
            schema:
              properties:
                category:
                  description: Event category
                  type: string
                createdAt:
                  description: Event time in RFC3339 format (default:now).
                  type: string
                event:
                  description: Event message
                  type: string
                message:
                  description: Event message in detail
                  type: string
                origin:
                  description: Which service/APP publish the event
                  type: string
                severity:
                  description: Event severity (default:info).
                  enum:
                  - alert
                  - warning
                  - info
                  type: string
                user:
                  description: Username who trigger the event
                  type: string
                userOrigin:
                  description: User comes from. It's normally an IP address.
                  type: string
              required:
              - origin
              - event
              - category
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data: ok
          description: success
      summary: Create log
      tags:
      - event
  /events/configuration:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  desiredDiskCacheSizeMB: 2
                  disks:
                  - device: /dev/root
                    free: 1347792896
                    mount: /
                    name: System
                    percent: 75.34374779889012
                    protect: 838860800
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 4118540288
                  - device: /dev/mmcblk0p1
                    free: 7636680704
                    mount: /media/sd-mmcblk0p1
                    name: SD1-1
                    percent: 4.071308614330875
                    protect: 0
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 7960788992
                    used: 324108288
                  enable: true
                  enableTimeToLiveSec: true
                  reachThresholdPolicy: rotate
                  targetDiskName: System
                  timeToLiveSec: 86400
              schema:
                properties:
                  data:
                    properties:
                      desiredDiskCacheSizeMB:
                        type: string
                      enable:
                        type: boolean
                      enableTimeToLiveSec:
                        type: boolean
                      reachThresholdPolicy:
                        description: default to rotate
                        enum:
                        - rotate
                        - stop
                        type: string
                      timeToLiveSec:
                        description: unlimit if value <= 0
                        type: integer
          description: success
      summary: Get configuration of events
      tags:
      - event
    put:
      requestBody:
        content:
          application/json:
            example:
              desiredDiskCacheSizeMB: 2
              enable: true
              enableTimeToLiveSec: true
              reachThresholdPolicy: rotate
              targetDiskName: System
              timeToLiveSec: 86400
            schema:
              properties:
                desiredDiskCacheSizeMB:
                  type: string
                enable:
                  type: boolean
                enableTimeToLiveSec:
                  type: boolean
                reachThresholdPolicy:
                  description: default to rotate
                  enum:
                  - rotate
                  - stop
                  type: string
                timeToLiveSec:
                  description: unlimit if value <= 0
                  type: integer
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  desiredDiskCacheSizeMB: 2
                  disks:
                  - device: /dev/root
                    free: 1347792896
                    mount: /
                    name: System
                    percent: 75.34374779889012
                    protect: 838860800
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 4118540288
                  - device: /dev/mmcblk0p1
                    free: 7636680704
                    mount: /media/sd-mmcblk0p1
                    name: SD1-1
                    percent: 4.071308614330875
                    protect: 0
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 7960788992
                    used: 324108288
                  enable: true
                  enableTimeToLiveSec: true
                  reachThresholdPolicy: rotate
                  targetDiskName: System
                  timeToLiveSec: 86400
              schema:
                properties:
                  data:
                    properties:
                      desiredDiskCacheSizeMB:
                        type: string
                      enable:
                        type: boolean
                      enableTimeToLiveSec:
                        type: boolean
                      reachThresholdPolicy:
                        description: default to rotate
                        enum:
                        - rotate
                        - stop
                        type: string
                      timeToLiveSec:
                        description: unlimit if value <= 0
                        type: integer
          description: success
      summary: Set event configuration
      tags:
      - event
  /events/profile:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  categories:
                  - azure
                  - device setting
                  - modbus
                  - mqtt
                  - network
                  - store-forward
                  - system
                  eventNames:
                  - app crash
                  - app start
                  - app stop
                  - buffer active
                  - buffer clean
                  - buffer full
                  - buffer inactive
                  - buffer sending
                  - cellular no signal
                  - cellular signal good
                  - cellular signal low
                  - configuration update failed
                  - configuration update success
                  - device connect
                  - device connect fail
                  - device connected
                  - device connection fail
                  - device disconnect
                  - device reboot
                  - device send properties fail
                  - device send telemetry fail
                  - edge connected
                  - edge disconnected
                  - edge send properties fail
                  - edge send telemetry fail
                  - function failed
                  - function recover
                  - master device conncted
                  - master device disconnected
                  - memory usage > 90%
                  - ota download cancel
                  - ota download completed
                  - ota download failed
                  - ota download resume
                  - ota download suspend
                  - slave device connected
                  - slave device failed
                  - software installation completed
                  - software installation failed
                  - system load 5 min > 1
                  - system load 5 min > 3
                  - system storage usage > 90%
                  - system storage usage > 95%
                  - time sync failed
                  - time sync success
                  - upgrade roll back completed
                  - uplink change
                  - user login fail
                  - wrong function called
                  events:
                  - category: device setting
                    enable: true
                    event: configuration update failed
                    id: 1
                    severity: alert
                  - category: device setting
                    enable: false
                    event: configuration update success
                    id: 2
                    severity: info
                  - category: network
                    enable: true
                    event: uplink change
                    id: 3
                    severity: warning
                  - category: device setting
                    enable: true
                    event: time sync failed
                    id: 4
                    severity: warning
                  - category: device setting
                    enable: false
                    event: time sync success
                    id: 5
                    severity: info
                  - category: network
                    enable: true
                    event: cellular no signal
                    id: 6
                    severity: alert
                  - category: network
                    enable: true
                    event: cellular signal low
                    id: 7
                    severity: warning
                  - category: network
                    enable: false
                    event: cellular signal good
                    id: 8
                    severity: info
                  - category: system
                    enable: true
                    event: system storage usage > 90%
                    id: 9
                    severity: warning
                  - category: system
                    enable: true
                    event: system storage usage > 95%
                    id: 10
                    severity: alert
                  - category: system
                    enable: true
                    event: system load 5 min > 1
                    id: 11
                    severity: warning
                  - category: system
                    enable: true
                    event: system load 5 min > 3
                    id: 12
                    severity: alert
                  - category: system
                    enable: true
                    event: memory usage > 90%
                    id: 13
                    severity: warning
                  - category: azure
                    enable: false
                    event: edge connected
                    id: 14
                    severity: info
                  - category: azure
                    enable: true
                    event: edge disconnected
                    id: 15
                    severity: warning
                  - category: azure
                    enable: true
                    event: edge send properties fail
                    id: 16
                    severity: alert
                  - category: azure
                    enable: true
                    event: edge send telemetry fail
                    id: 17
                    severity: alert
                  - category: azure
                    enable: false
                    event: device connected
                    id: 18
                    severity: info
                  - category: azure
                    enable: true
                    event: device disconnect
                    id: 19
                    severity: warning
                  - category: azure
                    enable: true
                    event: device connection fail
                    id: 20
                    severity: alert
                  - category: azure
                    enable: true
                    event: device send properties fail
                    id: 21
                    severity: alert
                  - category: azure
                    enable: true
                    event: device send telemetry fail
                    id: 22
                    severity: alert
                  - category: store-forward
                    enable: true
                    event: buffer active
                    id: 23
                    severity: warning
                  - category: store-forward
                    enable: false
                    event: buffer inactive
                    id: 24
                    severity: info
                  - category: store-forward
                    enable: false
                    event: buffer sending
                    id: 25
                    severity: info
                  - category: store-forward
                    enable: false
                    event: buffer clean
                    id: 26
                    severity: info
                  - category: store-forward
                    enable: true
                    event: buffer full
                    id: 27
                    severity: alert
                  - category: mqtt
                    enable: false
                    event: device connect
                    id: 28
                    severity: info
                  - category: mqtt
                    enable: true
                    event: device disconnect
                    id: 29
                    severity: warning
                  - category: mqtt
                    enable: true
                    event: device connect fail
                    id: 30
                    severity: alert
                  - category: mqtt
                    enable: true
                    event: device send telemetry fail
                    id: 31
                    severity: alert
                  - category: modbus
                    enable: true
                    event: configuration update success
                    id: 37
                    severity: warning
                  - category: modbus
                    enable: true
                    event: configuration update failed
                    id: 38
                    severity: warning
                  - category: modbus
                    enable: false
                    event: slave device connected
                    id: 39
                    severity: info
                  - category: modbus
                    enable: true
                    event: slave device failed
                    id: 40
                    severity: alert
                  - category: modbus
                    enable: false
                    event: function recover
                    id: 41
                    severity: info
                  - category: modbus
                    enable: true
                    event: function failed
                    id: 42
                    severity: warning
                  - category: modbus
                    enable: true
                    event: master device conncted
                    id: 45
                    severity: warning
                  - category: modbus
                    enable: true
                    event: master device disconnected
                    id: 46
                    severity: warning
                  - category: modbus
                    enable: true
                    event: wrong function called
                    id: 47
                    severity: alert
                  - category: system
                    enable: true
                    event: device reboot
                    id: 48
                    severity: warning
                  - category: system
                    enable: true
                    event: user login fail
                    id: 49
                    severity: warning
                  - category: system
                    enable: true
                    event: app stop
                    id: 50
                    severity: warning
                  - category: system
                    enable: false
                    event: app start
                    id: 51
                    severity: info
                  - category: system
                    enable: true
                    event: app crash
                    id: 52
                    severity: alert
                  - category: system
                    enable: true
                    event: ota download failed
                    id: 53
                    severity: alert
                  - category: system
                    enable: true
                    event: ota download suspend
                    id: 54
                    severity: warning
                  - category: system
                    enable: false
                    event: ota download resume
                    id: 55
                    severity: info
                  - category: system
                    enable: false
                    event: ota download completed
                    id: 56
                    severity: info
                  - category: system
                    enable: true
                    event: ota download cancel
                    id: 57
                    severity: warning
                  - category: system
                    enable: true
                    event: software installation failed
                    id: 58
                    severity: alert
                  - category: system
                    enable: true
                    event: upgrade roll back completed
                    id: 59
                    severity: warning
                  - category: system
                    enable: true
                    event: software installation completed
                    id: 60
                    severity: info
                  origins:
                  - AID App
                  - AIE App
                  - Device App
                  - MQTT Client
                  - Modbus
                  - system
                  severities:
                  - info
                  - warning
                  - alert
          description: success
      summary: Event profile
      tags:
      - event
    patch:
      requestBody:
        content:
          application/json:
            examples:
              byid:
                summary: update by ID
                value:
                  events:
                  - enable: true
                    id: 60
              byname:
                summary: update by name and category
                value:
                  events:
                  - category: system
                    enable: true
                    event: software installation completed
            schema: {}
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  categories:
                  - azure
                  - device setting
                  - modbus
                  - mqtt
                  - network
                  - store-forward
                  - system
                  eventNames:
                  - app crash
                  - app start
                  - app stop
                  - buffer active
                  - buffer clean
                  - buffer full
                  - buffer inactive
                  - buffer sending
                  - cellular no signal
                  - cellular signal good
                  - cellular signal low
                  - configuration update failed
                  - configuration update success
                  - device connect
                  - device connect fail
                  - device connected
                  - device connection fail
                  - device disconnect
                  - device reboot
                  - device send properties fail
                  - device send telemetry fail
                  - edge connected
                  - edge disconnected
                  - edge send properties fail
                  - edge send telemetry fail
                  - function failed
                  - function recover
                  - master device conncted
                  - master device disconnected
                  - memory usage > 90%
                  - ota download cancel
                  - ota download completed
                  - ota download failed
                  - ota download resume
                  - ota download suspend
                  - slave device connected
                  - slave device failed
                  - software installation completed
                  - software installation failed
                  - system load 5 min > 1
                  - system load 5 min > 3
                  - system storage usage > 90%
                  - system storage usage > 95%
                  - time sync failed
                  - time sync success
                  - upgrade roll back completed
                  - uplink change
                  - user login fail
                  - wrong function called
                  events:
                  - category: device setting
                    enable: true
                    event: configuration update failed
                    id: 1
                    severity: alert
                  - category: device setting
                    enable: false
                    event: configuration update success
                    id: 2
                    severity: info
                  - category: network
                    enable: true
                    event: uplink change
                    id: 3
                    severity: warning
                  - category: device setting
                    enable: true
                    event: time sync failed
                    id: 4
                    severity: warning
                  - category: device setting
                    enable: false
                    event: time sync success
                    id: 5
                    severity: info
                  - category: network
                    enable: true
                    event: cellular no signal
                    id: 6
                    severity: alert
                  - category: network
                    enable: true
                    event: cellular signal low
                    id: 7
                    severity: warning
                  - category: network
                    enable: false
                    event: cellular signal good
                    id: 8
                    severity: info
                  - category: system
                    enable: true
                    event: system storage usage > 90%
                    id: 9
                    severity: warning
                  - category: system
                    enable: true
                    event: system storage usage > 95%
                    id: 10
                    severity: alert
                  - category: system
                    enable: true
                    event: system load 5 min > 1
                    id: 11
                    severity: warning
                  - category: system
                    enable: true
                    event: system load 5 min > 3
                    id: 12
                    severity: alert
                  - category: system
                    enable: true
                    event: memory usage > 90%
                    id: 13
                    severity: warning
                  - category: azure
                    enable: false
                    event: edge connected
                    id: 14
                    severity: info
                  - category: azure
                    enable: true
                    event: edge disconnected
                    id: 15
                    severity: warning
                  - category: azure
                    enable: true
                    event: edge send properties fail
                    id: 16
                    severity: alert
                  - category: azure
                    enable: true
                    event: edge send telemetry fail
                    id: 17
                    severity: alert
                  - category: azure
                    enable: false
                    event: device connected
                    id: 18
                    severity: info
                  - category: azure
                    enable: true
                    event: device disconnect
                    id: 19
                    severity: warning
                  - category: azure
                    enable: true
                    event: device connection fail
                    id: 20
                    severity: alert
                  - category: azure
                    enable: true
                    event: device send properties fail
                    id: 21
                    severity: alert
                  - category: azure
                    enable: true
                    event: device send telemetry fail
                    id: 22
                    severity: alert
                  - category: store-forward
                    enable: true
                    event: buffer active
                    id: 23
                    severity: warning
                  - category: store-forward
                    enable: false
                    event: buffer inactive
                    id: 24
                    severity: info
                  - category: store-forward
                    enable: false
                    event: buffer sending
                    id: 25
                    severity: info
                  - category: store-forward
                    enable: false
                    event: buffer clean
                    id: 26
                    severity: info
                  - category: store-forward
                    enable: true
                    event: buffer full
                    id: 27
                    severity: alert
                  - category: mqtt
                    enable: false
                    event: device connect
                    id: 28
                    severity: info
                  - category: mqtt
                    enable: true
                    event: device disconnect
                    id: 29
                    severity: warning
                  - category: mqtt
                    enable: true
                    event: device connect fail
                    id: 30
                    severity: alert
                  - category: mqtt
                    enable: true
                    event: device send telemetry fail
                    id: 31
                    severity: alert
                  - category: modbus
                    enable: true
                    event: configuration update success
                    id: 37
                    severity: warning
                  - category: modbus
                    enable: true
                    event: configuration update failed
                    id: 38
                    severity: warning
                  - category: modbus
                    enable: false
                    event: slave device connected
                    id: 39
                    severity: info
                  - category: modbus
                    enable: true
                    event: slave device failed
                    id: 40
                    severity: alert
                  - category: modbus
                    enable: false
                    event: function recover
                    id: 41
                    severity: info
                  - category: modbus
                    enable: true
                    event: function failed
                    id: 42
                    severity: warning
                  - category: modbus
                    enable: true
                    event: master device conncted
                    id: 45
                    severity: warning
                  - category: modbus
                    enable: true
                    event: master device disconnected
                    id: 46
                    severity: warning
                  - category: modbus
                    enable: true
                    event: wrong function called
                    id: 47
                    severity: alert
                  - category: system
                    enable: true
                    event: device reboot
                    id: 48
                    severity: warning
                  - category: system
                    enable: true
                    event: user login fail
                    id: 49
                    severity: warning
                  - category: system
                    enable: true
                    event: app stop
                    id: 50
                    severity: warning
                  - category: system
                    enable: false
                    event: app start
                    id: 51
                    severity: info
                  - category: system
                    enable: true
                    event: app crash
                    id: 52
                    severity: alert
                  - category: system
                    enable: true
                    event: ota download failed
                    id: 53
                    severity: alert
                  - category: system
                    enable: true
                    event: ota download suspend
                    id: 54
                    severity: warning
                  - category: system
                    enable: false
                    event: ota download resume
                    id: 55
                    severity: info
                  - category: system
                    enable: false
                    event: ota download completed
                    id: 56
                    severity: info
                  - category: system
                    enable: true
                    event: ota download cancel
                    id: 57
                    severity: warning
                  - category: system
                    enable: true
                    event: software installation failed
                    id: 58
                    severity: alert
                  - category: system
                    enable: true
                    event: upgrade roll back completed
                    id: 59
                    severity: warning
                  - category: system
                    enable: true
                    event: software installation completed
                    id: 60
                    severity: info
                  origins:
                  - AID App
                  - AIE App
                  - Device App
                  - MQTT Client
                  - Modbus
                  - system
                  severities:
                  - info
                  - warning
                  - alert
          description: success
      summary: Switch event enablement
      tags:
      - event
  /hardware/allocations:
    delete:
      parameters:
      - description: Requested app name
        example: myapp
        in: query
        name: app
        required: true
        schema:
          type: string
      - description: resource id
        example: 4
        in: query
        name: resid
        schema:
          type: integer
      responses:
        200:
          content:
            application/json:
              example:
                data: []
              schema:
                $ref: '#/components/schemas/resourceList'
          description: Current all allocated resources associate to the app
      summary: Delete the app resources
      tags:
      - hardware
    put:
      parameters:
      - description: Requested app name
        example: testapp
        in: query
        name: app
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            example:
            - id: 4
              value:
                dst: "4840"
                protocol: tcp
                src: "4840"
            - id: 4
              value:
                dst: "4841"
                protocol: tcp
                src: "4841"
            - id: 4
              value:
                dst: 4850-4851
                protocol: tcp
                src: 4850-4851
            schema:
              $ref: '#/components/schemas/requestResource'
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                - allocations:
                  - app: testapp
                    value:
                      dst: "4840"
                      protocol: tcp
                      ruleID: 3
                      src: "4840"
                  - app: testapp
                    value:
                      dst: "4841"
                      protocol: tcp
                      ruleID: 4
                      src: "4841"
                  - app: testapp
                    value:
                      dst: 4850-4851
                      protocol: tcp
                      ruleID: 5
                      src: 4850-4851
                  displayName: external-port-forward
                  exclusive: true
                  id: 4
                  type: port
              schema:
                $ref: '#/components/schemas/resourceList'
          description: Current all allocated resources associate to the app
      summary: Replace the app resources
      tags:
      - hardware
  /hardware/resources:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                - allocations:
                  - app: testapp
                    value: 50
                  displayName: cpu-shares
                  exclusive: false
                  id: 1
                  type: internal
                - allocations: []
                  displayName: cpu-cores
                  exclusive: false
                  id: 2
                  type: internal
                - allocations:
                  - app: testapp
                    value: 384
                  displayName: memory
                  exclusive: false
                  id: 3
                  type: internal
                - allocations:
                  - app: testapp
                    value:
                      dst: "404"
                      protocol: tcp
                      ruleID: 1
                      src: "404"
                  displayName: external-port-forward
                  exclusive: true
                  id: 4
                  type: port
                - allocations:
                  - app: testapp
                    value:
                      dst: "404"
                      protocol: both
                      ruleID: 10030
                  displayName: port-filter
                  exclusive: true
                  id: 5
                  type: port
              schema:
                $ref: '#/components/schemas/resourceList'
          description: All current allocated resources
      summary: Get all current allocated resources
      tags:
      - hardware
  /jobs:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - at: null
                  completedAt: null
                  createdAt: "2019-10-31T14:05:48.287613208+08:00"
                  id: 6
                  lastState: ""
                  nextTriggerAt: null
                  now: true
                  owner: system
                  pendingAt: "2019-10-31T14:05:48.464809333+08:00"
                  resourceID: 4
                  resourceType: installation
                  startedAt: "2019-10-31T14:05:48.481181202+08:00"
                  state: running
              schema:
                properties:
                  count:
                    type: integer
                  data:
                    items:
                      properties:
                        at:
                          description: Run the job periodically
                          properties:
                            day:
                              type: string
                            dayOfWeek:
                              type: string
                            hour:
                              type: string
                            minute:
                              type: string
                            month:
                              type: string
                        completedAt:
                          format: date-time
                          type: string
                        completedTask:
                          type: integer
                        createdAt:
                          format: date-time
                          type: string
                        errorMessage:
                          description: appear when state is failed
                          type: string
                        id:
                          type: integer
                        lastState:
                          description: When suspended, lastState is the last active
                            state
                          type: string
                        nextTriggerAt:
                          description: When setting `at`, this field shows the time
                            to start
                          format: date-time
                          type: string
                        owner:
                          description: User whom creating this job
                          type: string
                        pendingAt:
                          format: date-time
                          type: string
                        resourceID:
                          description: resource id associating to this job
                          type: integer
                        resourceType:
                          description: resource type associating to this job
                          enum:
                          - installation
                          - reboot
                          type: string
                        startedAt:
                          format: date-time
                          type: string
                        state:
                          enum:
                          - created
                          - pending
                          - running
                          - succeed
                          - failed
                          - canceling
                          - canceled
                          - suppending
                          - suppended
                          - resuming
                          type: string
                        totalTask:
                          type: integer
                    type: array
          description: success
      summary: Get jobs
      tags:
      - job
  /permissions:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 2
                data:
                - description: ""
                  id: SYS_USER_RW
                  name: User/Role Management
                - description: ""
                  id: SYS_MAINTENANCE_RW
                  name: Device Management
              schema:
                items:
                  $ref: '#/components/schemas/Permission'
                type: array
          description: success
      summary: Query permissions
      tags:
      - users
  /roles:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - description: ""
                  id: 1
                  name: Administrator
                  permissions:
                  - SYS_USER_RW
                  - SYS_MAINTENANCE_RW
                  users:
                  - id: 1
                    name: admin
                  - id: 2
                    name: myuser
              schema:
                properties:
                  count:
                    type: integer
                  data:
                    items:
                      $ref: '#/components/schemas/Role'
                    type: array
          description: success
      summary: Query roles
      tags:
      - users
    post:
      requestBody:
        content:
          application/json:
            example:
              description: ""
              name: myrole
              permissions:
              - SYS_USER_RW
            schema:
              properties:
                description:
                  type: string
                name:
                  type: string
                permissions:
                  items:
                    description: ID of permission
                    type: string
              required:
              - name
              - permissions
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  description: moxa best
                  id: 2
                  name: myrole
                  permissions:
                  - SYS_USER_RW
                  users: []
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Role'
          description: success
      summary: create a role
      tags:
      - users
  /roles/{id}:
    delete:
      responses:
        204:
          description: success
      summary: Delete role by ID
      tags:
      - users
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  description: moxa best
                  id: 2
                  name: myrole
                  permissions:
                  - SYS_USER_RW
                  users: []
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Role'
          description: success
      summary: get role by ID
      tags:
      - users
    parameters:
    - description: ID of role
      in: path
      name: id
      required: true
      schema:
        type: integer
    put:
      requestBody:
        content:
          application/json:
            example:
              description: ""
              name: myrole
              permissions:
              - SYS_USER_RW
            schema:
              properties:
                description:
                  type: string
                name:
                  type: string
                permissions:
                  items:
                    description: ID of permission
                    type: string
              required:
              - name
              - permissions
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  description: moxa best
                  id: 2
                  name: myrole
                  permissions:
                  - SYS_USER_RW
                  users: []
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/Role'
          description: success
      summary: update role by ID
      tags:
      - users
  /system/auth:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  maxSessionCount: 5
                  sessionTimeoutMin: 10
              schema:
                properties:
                  data:
                    properties:
                      maxSessionCount:
                        description: limit valid session/token count by the authentication
                          service issues to.
                        type: integer
                      sessionTimeoutMin:
                        description: session/token will be expired in `sessionTimeoutMin`
                          minutes.
                        type: integer
          description: success
      summary: Get authentication configuration
      tags:
      - authentication
    put:
      description: Set authentication configuration. After applying configuration,
        the device must reboot to take effect.
      requestBody:
        content:
          application/json:
            example:
              maxSessionCount: 5
              sessionTimeoutMin: 10
            schema:
              properties:
                maxSessionCount:
                  description: limit valid session/token count by the authentication
                    service issues to.
                  type: integer
                sessionTimeoutMin:
                  description: session/token will be expired in `sessionTimeoutMin`
                    minutes.
                  type: integer
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  maxSessionCount: 5
                  sessionTimeoutMin: 10
              schema:
                properties:
                  data:
                    properties:
                      maxSessionCount:
                        description: limit valid session/token count by the authentication
                          service issues to.
                        type: integer
                      sessionTimeoutMin:
                        description: session/token will be expired in `sessionTimeoutMin`
                          minutes.
                        type: integer
          description: success
        400:
          description: |-
            - bad request
            - invalid value
      summary: Set authentication configuration
      tags:
      - authentication
  /system/configuration:
    get:
      parameters:
      - description: action to be executed
        in: query
        name: action
        required: true
        schema:
          default: download
          enum:
          - download
          - get-profile
          type: string
      - description: Use password to encryption (default:true)
        in: query
        name: encryption
        schema:
          default: true
          type: boolean
      - description: If encryption is true, use this field as password (default:serial
          number), which should contain a number and a special char.
        in: header
        name: password
        schema:
          type: string
      - description: select configurations by profiles. If no value is given, it will
          select all.
        example: |
          [{"app":"modbusmaster"},{"app":"cloud"}]
        in: query
        name: select
        schema:
          format: string
      - description: filter configurations by profiles. It will do `select` first,
          then do `filter`.
        example: |
          [{"labels":["credential"]},{"labels":["network"]}]
        in: query
        name: filter
        schema:
          format: string
      responses:
        200:
          content:
            application/json:
              example:
                count: 21
                data:
                - app: system
                  labels: []
                  section: core
                - app: device
                  labels:
                  - network
                  section: cellulars
                - app: device
                  labels: []
                  section: dhcpservers
                - app: device
                  labels: []
                  section: discovery
                - app: device
                  labels:
                  - network
                  section: ethernets
                - app: device
                  labels: []
                  section: firewall
                - app: device
                  labels: []
                  section: general
                - app: device
                  labels: []
                  section: gps
                - app: device
                  labels: []
                  section: iptables
                - app: device
                  labels: []
                  section: minicards
                - app: device
                  labels:
                  - network
                  section: route
                - app: device
                  labels: []
                  section: serials
                - app: device
                  labels: []
                  section: time
                - app: device
                  labels:
                  - network
                  section: wifi
                - app: cloud
                  labels: []
                  section: core
                - app: edge-web
                  labels: []
                  section: core
                - app: eipscanner
                  labels: []
                  section: core
                - app: function
                  labels: []
                  section: core
                - app: modbusmaster
                  labels: []
                  section: core
                - app: opcuaserver
                  labels: []
                  section: core
                - app: tagservice
                  labels: []
                  section: core
              schema:
                properties:
                  data:
                    items:
                      properties:
                        app:
                          description: filter by APP name or `system` as internal
                            services. Keep this empty or skip this if needed.
                          type: string
                        labels:
                          description: filter by labels
                          items:
                            type: string
                        section:
                          description: filter by configuration section name. Keep
                            this empty or skip this if needed.
                          type: string
                      type: object
                    type: array
            application/tar+gz:
              schema:
                format: binary
                type: string
          description: |
            success to return one of content-type
              1. `application/tar+gz` when query parameter `action` == `download`
              2. `application/json` when query parameter `action` == `get-profile`
        400:
          description: |
            1. Bad format of query string
      summary: Export configurations
      tags:
      - systems
    put:
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                apply:
                  default: false
                  description: Apply configuration and will check if model name or
                    version has conflict.
                  type: boolean
                encryption:
                  default: true
                  description: Use password to encryption (default:true)
                  type: boolean
                file:
                  description: configuration file
                  format: binary
                  type: string
                force:
                  default: false
                  description: Ignore the apply conflicts and force to import configuration.
                  type: boolean
                password:
                  description: password (default:serial number)
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              examples:
                Both different:
                  summary: Both different
                  value:
                    data:
                      diff:
                        current:
                          model: uc-3100
                          tpeversion: 2.0.0-1600
                        imported:
                          model: uc-8100-lx
                          tpeversion: 1.1.0-1234
                      fileName: 2019-12-19-13-52-backup.tar.gz
                      fileSize: 46272
                Devicedifferent:
                  summary: Device different
                  value:
                    data:
                      diff:
                        current:
                          model: uc-3100
                          tpeversion: 2.0.0-1600
                        imported:
                          model: uc-8100-lx
                          tpeversion: 2.0.0-1600
                      fileName: 2019-12-19-13-52-backup.tar.gz
                      fileSize: 46272
                Nodifference:
                  summary: No difference
                  value:
                    data:
                      diff: null
                      fileName: 2019-12-19-13-52-backup.tar.gz
                      fileSize: 46272
                TPEversiondifferent:
                  summary: TPE version different
                  value:
                    data:
                      diff:
                        current:
                          model: uc-3100
                          tpeversion: 2.0.0-1600
                        imported:
                          model: uc-3100
                          tpeversion: 1.1.0-1234
                      fileName: 2019-12-19-13-52-backup.tar.gz
                      fileSize: 46272
              schema:
                properties:
                  data:
                    properties:
                      diff:
                        properties:
                          current:
                            properties:
                              model:
                                type: string
                              tpeversion:
                                type: string
                            type: object
                          imported:
                            properties:
                              model:
                                type: string
                              tpeversion:
                                type: string
                            type: object
                        type: object
                      filename:
                        type: string
                      filesize:
                        type: integer
          description: success
        400:
          content:
            application/json:
              examples:
                extract:
                  summary: invalid extract
                  value:
                    error:
                      code: 10001
                      message: 'extract: invalid file or authentication failed'
                filesize:
                  summary: file size is over limitation
                  value:
                    error:
                      code: 10000
                      message: file is over size
              schema:
                properties:
                  error:
                    properties:
                      code:
                        type: integer
                      message:
                        type: string
          description: error
      summary: Upload configurations
      tags:
      - systems
  /system/configuration/{filename}:
    parameters:
    - description: |
        The `filename` value returned in the response the `filename` in `PUT /system/configuration`.
      in: path
      name: filename
      required: true
      schema:
        type: string
    patch:
      description: |
        Apply configuration that uploaded by `PUT /system/configuration`. After applying configuration, system will be rebooted in 5 seconds.
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  diff: null
                  fileName: 2019-12-20-04-51-backup.tar.gz
                  fileSize: 46297
              schema:
                properties:
                  data:
                    properties:
                      fileName:
                        type: string
                      fileSize:
                        type: integer
          description: success
      summary: Apply configuration
      tags:
      - systems
  /system/discovery:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable discovery service
                        type: boolean
          description: success
      summary: Get discovery service status
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              enable: true
            schema:
              properties:
                enable:
                  description: enable discovery service
                  type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable discovery service
                        type: boolean
          description: success
      summary: Set discovery service configuration
      tags:
      - systems
  /system/dosdefense:
    get:
      description: Get DoS defense configuration
      responses:
        200:
          content:
            application/json:
              examples:
                Enable All DoS Defense Rules:
                  value:
                    data:
                    - enable: true
                      id: 50001
                      limit: 4000
                      name: SYN-Flood
                    - enable: true
                      id: 50003
                      limit: 4000
                      name: ICMP-Death
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/DoSEntry'
                type: object
          description: DoS defense configuration
      tags:
      - systems
    patch:
      description: Patch DoS defense configuration
      requestBody:
        content:
          application/json:
            examples:
              Enable All DoS Defense Rules:
                value:
                - enable: true
                  id: 50001
                  limit: 4000
                - enable: true
                  id: 50003
                  limit: 4000
              Enable ID=50001 (SYN-Flood) rule:
                value:
                - enable: true
                  id: 50001
              Update ID=650001 (SYN-Flood) limit:
                value:
                - id: 50001
                  limit: 50
            schema:
              items:
                $ref: '#/components/schemas/DoSEntry'
              type: array
        required: true
      responses:
        200:
          content:
            application/json:
              examples:
                Enable All DoS Defense Rules:
                  value:
                    data:
                    - enable: true
                      id: 50001
                      limit: 4000
                      name: SYN-Flood
                    - enable: true
                      id: 50003
                      limit: 4000
                      name: ICMP-Death
                Enable ID=50001 (SYN-Flood) rule:
                  value:
                    data:
                    - enable: true
                      id: 50001
                      limit: 4000
                      name: SYN-Flood
                Update ID=50001 (SYN-Flood) limit:
                  value:
                    data:
                    - enable: true
                      id: 50001
                      limit: 50
                      name: SYN-Flood
              schema:
                items:
                  $ref: '#/components/schemas/DoSEntry'
                type: array
          description: DoS defense configuration
      tags:
      - systems
  /system/httpserver:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  certFileName: default.crt
                  httpEnable: true
                  httpPort: 80
                  httpsEnable: true
                  httpsPort: 443
                  keyFileName: default.key
              schema:
                properties:
                  data:
                    properties:
                      certFilename:
                        description: filename of https certificate
                        type: string
                      httpEnable:
                        type: boolean
                      httpPort:
                        description: listen port for http
                        type: integer
                      httpsEnable:
                        type: boolean
                      httpsPort:
                        description: listen port for https
                        type: integer
                      keyFilename:
                        description: filename of https key
                        type: string
          description: success
      summary: Get httpserver configuration
      tags:
      - systems
    patch:
      requestBody:
        content:
          application/json:
            schema:
              properties:
                cert:
                  description: (JSON only) certificate content
                  type: string
                certFile:
                  description: |
                    (form-data only) certificate for https. The suffix of filename must be one of `.crt`, `.cer` or `.pem` with PEM format which the content starts with `----- BEGIN CERTIFICATE -----`
                  format: binary
                  type: string
                certFilename:
                  description: (JSON only) filename of client authentication certificate
                  type: string
                httpEnable:
                  type: boolean
                httpPort:
                  description: listen port for http
                  type: integer
                httpsEnable:
                  type: boolean
                httpsPort:
                  description: listen port for https
                  type: integer
                key:
                  description: (JSON only) key content
                  type: string
                keyFile:
                  description: |
                    (form-data only) key for https. The suffix of filename must be one of `.key`, `.pk` or `.pem` with PEM format which the content starts with `----- BEGIN RSA PRIVATE KEY -----`
                  format: binary
                  type: string
                keyFilename:
                  description: (JSON only) filename of client authentication key
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  certFileName: default.crt
                  httpEnable: true
                  httpPort: 80
                  httpsEnable: true
                  httpsPort: 443
                  keyFileName: default.key
              schema:
                properties:
                  data:
                    properties:
                      certFilename:
                        description: filename of https certificate
                        type: string
                      httpEnable:
                        type: boolean
                      httpPort:
                        description: listen port for http
                        type: integer
                      httpsEnable:
                        type: boolean
                      httpsPort:
                        description: listen port for https
                        type: integer
                      keyFilename:
                        description: filename of https key
                        type: string
          description: success
      summary: Set httpserver configuration partially
      tags:
      - systems
    put:
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                cert:
                  description: (JSON only) certificate content
                  type: string
                certFile:
                  description: |
                    (form-data only) certificate for https. The suffix of filename must be one of `.crt`, `.cer` or `.pem` with PEM format which the content starts with `----- BEGIN CERTIFICATE -----`
                  format: binary
                  type: string
                certFilename:
                  description: (JSON only) filename of client authentication certificate
                  type: string
                httpEnable:
                  type: boolean
                httpPort:
                  description: listen port for http
                  type: integer
                httpsEnable:
                  type: boolean
                httpsPort:
                  description: listen port for https
                  type: integer
                key:
                  description: (JSON only) key content
                  type: string
                keyFile:
                  description: |
                    (form-data only) key for https. The suffix of filename must be one of `.key`, `.pk` or `.pem` with PEM format which the content starts with `----- BEGIN RSA PRIVATE KEY -----`
                  format: binary
                  type: string
                keyFilename:
                  description: (JSON only) filename of client authentication key
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  certFileName: default.crt
                  httpEnable: true
                  httpPort: 80
                  httpsEnable: true
                  httpsPort: 443
                  keyFileName: default.key
              schema:
                properties:
                  data:
                    properties:
                      certFilename:
                        description: filename of https certificate
                        type: string
                      httpEnable:
                        type: boolean
                      httpPort:
                        description: listen port for http
                        type: integer
                      httpsEnable:
                        type: boolean
                      httpsPort:
                        description: listen port for https
                        type: integer
                      keyFilename:
                        description: filename of https key
                        type: string
          description: success
      summary: Set httpserver configuration
      tags:
      - systems
  /system/lldp/config:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
                  messageInterval: 30
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        default: true
                        description: service status
                        type: boolean
                      messageInterval:
                        default: 30
                        description: Change transmit delay to the specified value
                          in seconds. The transmit delay is the delay between two
                          transmissions of LLDP PDU.
                        maximum: 16383
                        minimum: 5
                        type: integer
          description: success
      summary: Get configuration of LLDP
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              enable: true
              messageInterval: 30
            schema:
              properties:
                enable:
                  default: true
                  description: service status
                  type: boolean
                messageInterval:
                  default: 30
                  description: Change transmit delay to the specified value in seconds.
                    The transmit delay is the delay between two transmissions of LLDP
                    PDU.
                  maximum: 16383
                  minimum: 5
                  type: integer
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
                  messageInterval: 30
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        default: true
                        description: service status
                        type: boolean
                      messageInterval:
                        default: 30
                        description: Change transmit delay to the specified value
                          in seconds. The transmit delay is the delay between two
                          transmissions of LLDP PDU.
                        maximum: 16383
                        minimum: 5
                        type: integer
          description: success
      summary: Set configuration of LLDP
      tags:
      - systems
  /system/lldp/table:
    get:
      responses:
        200:
          content:
            application/json:
              schema:
                example:
                  count: 2
                  data:
                  - id: 1
                    neighborId: 00:90:e8:11:22:33
                    neighborPort: "16"
                    neighborPortDesc: 100TX,RJ45
                    neighborSystem: Managed Redundant Switch 02637
                    port: sw0
                  - id: 2
                    neighborId: 00:90:e8:55:66:77
                    neighborPort: "19"
                    neighborPortDesc: Intel(R) Dual Band Wireless-AC 8265
                    neighborSystem: Managed Redundant Switch 04610
                    port: eth0
                properties:
                  count:
                    description: table count
                    type: integer
                  data:
                    items:
                      properties:
                        id:
                          description: table item ID
                          type: integer
                        neighborId:
                          description: neighbor ID
                          type: string
                        neighborPort:
                          description: neighbor port
                          type: string
                        neighborPortDesc:
                          description: neighbor port description
                          type: string
                        neighborSystem:
                          description: neighbor system
                          type: string
                        port:
                          description: device port
                          type: string
                      type: object
                    type: array
          description: success
      summary: Get neighbors info of LLDP
      tags:
      - systems
  /system/log:
    get:
      parameters:
      - description: Indicate to download log as zip file. Value is always true.
        in: query
        name: download
        schema:
          type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  desiredDiskCacheSizeMB: 100
                  disks:
                  - device: /dev/root
                    free: 3961389056
                    mount: /
                    name: System
                    percent: 27.531145236535952
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 1504944128
                  - device: /dev/mmcblk0p1
                    free: 1069535232
                    mount: /host/media/sd-mmcblk0p1
                    name: SD 1-1
                    percent: 75.04916265816615
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 3217035264
                  - device: /dev/mmcblk0p2
                    free: 4286566400
                    mount: /host/media/mylabel
                    name: mylabel
                    percent: 9.555424327728121e-05
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 4096
                  - device: /dev/mmcblk0p3
                    free: 4286566400
                    mount: /host/media/sd-mmcblk0p3
                    name: SD 1-3
                    percent: 9.555424327728121e-05
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 4096
                  enable: true
                  enableTimeToLiveSec: false
                  targetDiskName: System
                  timeToLiveSec: 86400
              schema:
                properties:
                  data:
                    properties:
                      desiredDiskCacheSizeMB:
                        type: string
                      disk:
                        description: refer to API `/device/general`
                      enable:
                        type: boolean
                      enableTimeToLiveSec:
                        type: boolean
                      targetDiskName:
                        type: string
                      timeToLiveSec:
                        description: unlimit if value <= 0
                        type: integer
            application/zip:
              schema:
                format: binary
                type: string
          description: success
      summary: Get configuration or download log
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              desiredDiskCacheSizeMB: 100
              enable: true
              enableTimeToLiveSec: false
              targetDiskName: System
              timeToLiveSec: 7200
            schema:
              properties:
                desiredDiskCacheSizeMB:
                  type: string
                disk:
                  description: refer to API `/device/general`
                enable:
                  type: boolean
                enableTimeToLiveSec:
                  type: boolean
                targetDiskName:
                  type: string
                timeToLiveSec:
                  description: unlimit if value <= 0
                  type: integer
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  desiredDiskCacheSizeMB: 100
                  disks:
                  - device: /dev/root
                    free: 3961389056
                    mount: /
                    name: System
                    percent: 27.531145236535952
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 1504944128
                  - device: /dev/mmcblk0p1
                    free: 1069535232
                    mount: /host/media/sd-mmcblk0p1
                    name: SD 1-1
                    percent: 75.04916265816615
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 3217035264
                  - device: /dev/mmcblk0p2
                    free: 4286566400
                    mount: /host/media/mylabel
                    name: mylabel
                    percent: 9.555424327728121e-05
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 4096
                  - device: /dev/mmcblk0p3
                    free: 4286566400
                    mount: /host/media/sd-mmcblk0p3
                    name: SD 1-3
                    percent: 9.555424327728121e-05
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 4286570496
                    used: 4096
                  enable: true
                  enableTimeToLiveSec: false
                  targetDiskName: System
                  timeToLiveSec: 86400
              schema:
                properties:
                  data:
                    properties:
                      desiredDiskCacheSizeMB:
                        type: string
                      disk:
                        description: refer to API `/device/general`
                      enable:
                        type: boolean
                      enableTimeToLiveSec:
                        type: boolean
                      targetDiskName:
                        type: string
                      timeToLiveSec:
                        description: unlimit if value <= 0
                        type: integer
            application/zip:
              schema:
                format: binary
                type: string
          description: success
      summary: Set log configuration
      tags:
      - systems
  /system/log2syslog:
    delete:
      responses:
        204:
          description: success
      summary: delete syslog certificate
      tags:
      - systems
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  certFilename: intermedia.crt
                  enable: true
                  host: 10.144.48.106:514
                  protocol: udp
                  tag: mgate5105e
                  verifyCertificate: true
              schema:
                properties:
                  data:
                    properties:
                      certFilename:
                        type: string
                      enable:
                        type: boolean
                      host:
                        description: the format must be `IP:PORT`
                        type: string
                      protocol:
                        enum:
                        - tcp
                        - udp
                        - tcp+tls
                        type: string
                      tag:
                        type: string
                      verifyCertificate:
                        type: boolean
          description: success
      summary: Set log2syslog configuration
      tags:
      - systems
    put:
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                certFile:
                  format: binary
                  type: string
                enable:
                  type: boolean
                host:
                  description: the format must be `IP:PORT`
                  type: string
                protocol:
                  enum:
                  - tcp
                  - udp
                  - tcp+tls
                  type: string
                tag:
                  type: string
                verifyCertificate:
                  type: boolean
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  certFilename: intermedia.crt
                  enable: true
                  host: 10.144.48.106:514
                  protocol: udp
                  tag: mgate5105e
                  verifyCertificate: true
              schema:
                properties:
                  data:
                    properties:
                      certFilename:
                        type: string
                      enable:
                        type: boolean
                      host:
                        description: the format must be `IP:PORT`
                        type: string
                      protocol:
                        enum:
                        - tcp
                        - udp
                        - tcp+tls
                        type: string
                      tag:
                        type: string
                      verifyCertificate:
                        type: boolean
          description: success
      summary: set log to syslog service
      tags:
      - systems
  /system/netstat:
    put:
      requestBody:
        content:
          application/json:
            example:
              deadlineSecond: 20
              listen: true
              numeric: true
              tcp: true
              udp: true
            schema:
              properties:
                deadlineSecond:
                  type: integer
                listen:
                  type: boolean
                numeric:
                  type: boolean
                tcp:
                  type: boolean
                udp:
                  type: boolean
              type: object
        required: false
      responses:
        200:
          content:
            text/plain:
              schema:
                type: string
          description: success
      summary: Trigger netstat command
      tags:
      - systems
  /system/netstat/event:
    put:
      requestBody:
        content:
          application/json:
            example:
              deadlineSecond: 20
              listen: true
              numeric: true
              tcp: true
              udp: true
            schema:
              properties:
                deadlineSecond:
                  type: integer
                listen:
                  type: boolean
                numeric:
                  type: boolean
                tcp:
                  type: boolean
                udp:
                  type: boolean
              type: object
        required: false
      responses:
        200:
          content:
            text/plain:
              schema:
                type: string
          description: success
      summary: Trigger netstat command
      tags:
      - systems
  /system/ping:
    put:
      description: return SSE with topic stdout and stderr if endpoint has suffix
        `event`
      requestBody:
        content:
          application/json:
            example:
              count: 3
              deadlineSecond: 20
              destination: 8.8.8.8
              intervalSecond: 1
            schema:
              properties:
                count:
                  type: integer
                deadlineSecond:
                  type: integer
                destination:
                  type: string
                intervalSecond:
                  type: integer
              type: object
        required: false
      responses:
        200:
          content:
            text/plain:
              schema:
                type: string
          description: success
      summary: Trigger ping command
      tags:
      - systems
  /system/ping/event:
    put:
      description: return SSE with topic stdout and stderr if endpoint has suffix
        `event`
      requestBody:
        content:
          application/json:
            example:
              count: 3
              deadlineSecond: 20
              destination: 8.8.8.8
              intervalSecond: 1
            schema:
              properties:
                count:
                  type: integer
                deadlineSecond:
                  type: integer
                destination:
                  type: string
                intervalSecond:
                  type: integer
              type: object
        required: false
      responses:
        200:
          content:
            text/plain:
              schema:
                type: string
          description: success
      summary: Trigger ping command
      tags:
      - systems
  /system/reboot:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  at:
                    day: "1"
                    dayOfWeek: '*'
                    hour: "12"
                    minute: "0"
                    month: "1"
                  enableScheduler: true
                  lastBootAt: "2019-01-01T12:00:00Z"
                  nextTriggerAt: "2019-01-01T12:00:00Z"
              schema:
                properties:
                  data:
                    properties:
                      at:
                        properties:
                          day:
                            type: string
                          dayOfWeek:
                            type: string
                          hour:
                            type: string
                          minute:
                            type: string
                          month:
                            type: string
                      enableScheduler:
                        type: boolean
                      lastBootAt:
                        format: date-time
                        type: string
                      nextTriggerAt:
                        format: date-time
                        type: string
          description: success
      summary: Get reboot configuration
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            examples:
              now:
                summary: now
                value:
                  now: true
              scheduler:
                summary: reboot every hours
                value:
                  at:
                    day: "1"
                    dayOfWeek: '*'
                    hour: "12"
                    minute: "0"
                    month: "1"
                  enableScheduler: true
            schema:
              properties:
                at:
                  description: the format can be a fixed string "now", datetime in
                    RFC3339, or crontab (https://linux.die.net/man/5/crontab)
                  type: string
                enableScheduler:
                  type: boolean
                now:
                  description: reboot immediately
                  type: boolean
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  at:
                    day: "1"
                    dayOfWeek: '*'
                    hour: "12"
                    minute: "0"
                    month: "1"
                  enableScheduler: true
                  lastBootAt: "2019-01-01T12:00:00Z"
                  nextTriggerAt: "2019-01-01T12:00:00Z"
              schema:
                properties:
                  data:
                    properties:
                      at:
                        properties:
                          day:
                            type: string
                          dayOfWeek:
                            type: string
                          hour:
                            type: string
                          minute:
                            type: string
                          month:
                            type: string
                      enableScheduler:
                        type: boolean
                      lastBootAt:
                        format: date-time
                        type: string
                      nextTriggerAt:
                        format: date-time
                        type: string
          description: success
      summary: Reboot system
      tags:
      - systems
  /system/reset-default:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  factory:
                    isSupported: true
                    scopes:
                    - all
                  system:
                    isSupported: true
                    scopes:
                    - all
                    - account
                    - appdata
                    - discovery
                    - eventlog
                    - httpserver
                    - job
                    - journald
                    - keep-network-setting
                    - provision
                    - reboot
                    - sshserver
                    - serialconsole
                    - upgrade
              schema:
                properties:
                  data:
                    properties:
                      fileName:
                        type: string
                      fileSize:
                        type: integer
          description: success
      summary: get reset system capabilities
      tags:
      - systems
    put:
      parameters:
      - in: query
        name: mode
        schema:
          default: system
          enum:
          - factory
          - system
          type: string
      - description: If true, do reset immediately, else wait 3 seconds
        in: query
        name: sync
        schema:
          default: false
          type: boolean
      - description: reset scope
        in: query
        name: scopes
        schema:
          items:
            enum:
            - all
            - account
            - appdata
            - discovery
            - eventlog
            - httpserver
            - job
            - journald
            - keep-network-setting
            - provision
            - reboot
            - sshserver
            - serialconsole
            - upgrade
            type: string
          type: array
      responses:
        200:
          description: success
        400:
          description: |
            1. unsupported mode
            2. status is not ready
            3. invalid scopes
      summary: reset system to default configuration
      tags:
      - systems
  /system/security/account-policy:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  atLeastOneDigit: true
                  atLeastOneSpecial: true
                  enablePasswordLifetime: false
                  lengthMax: 64
                  lengthMin: 4
                  mixedUpperLowerLetters: true
                  passwordLifetime: 90
              schema:
                properties:
                  data:
                    properties:
                      atLeastOneDigit:
                        default: true
                        description: password must be at least one digit
                        type: boolean
                      atLeastOneSpecial:
                        default: true
                        description: password must be at least one special chararacter
                        type: boolean
                      enablePasswordLifetime:
                        default: false
                        description: enable password lifetime
                        type: boolean
                      lengthMax:
                        default: 64
                        description: password maximum length
                        type: integer
                      lengthMin:
                        default: 4
                        description: password minimum length
                        type: integer
                      mixedUpperLowerLetters:
                        default: true
                        description: password must be mixed upper and lower case
                        type: boolean
                      passwordLifetime:
                        default: 90
                        description: password should change after the days
                        type: integer
          description: success
      summary: Get account security policy
      tags:
      - security
    put:
      requestBody:
        content:
          application/json:
            example:
              atLeastOneDigit: true
              atLeastOneSpecial: true
              enablePasswordLifetime: false
              lengthMax: 64
              lengthMin: 4
              mixedUpperLowerLetters: true
              passwordLifetime: 90
            schema:
              properties:
                atLeastOneDigit:
                  default: true
                  description: password must be at least one digit
                  type: boolean
                atLeastOneSpecial:
                  default: true
                  description: password must be at least one special chararacter
                  type: boolean
                enablePasswordLifetime:
                  default: false
                  description: enable password lifetime
                  type: boolean
                lengthMax:
                  default: 64
                  description: password maximum length
                  type: integer
                lengthMin:
                  default: 4
                  description: password minimum length
                  type: integer
                mixedUpperLowerLetters:
                  default: true
                  description: password must be mixed upper and lower case
                  type: boolean
                passwordLifetime:
                  default: 90
                  description: password should change after the days
                  type: integer
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  atLeastOneDigit: true
                  atLeastOneSpecial: true
                  enablePasswordLifetime: false
                  lengthMax: 64
                  lengthMin: 4
                  mixedUpperLowerLetters: true
                  passwordLifetime: 90
              schema:
                properties:
                  data:
                    properties:
                      atLeastOneDigit:
                        default: true
                        description: password must be at least one digit
                        type: boolean
                      atLeastOneSpecial:
                        default: true
                        description: password must be at least one special chararacter
                        type: boolean
                      enablePasswordLifetime:
                        default: false
                        description: enable password lifetime
                        type: boolean
                      lengthMax:
                        default: 64
                        description: password maximum length
                        type: integer
                      lengthMin:
                        default: 4
                        description: password minimum length
                        type: integer
                      mixedUpperLowerLetters:
                        default: true
                        description: password must be mixed upper and lower case
                        type: boolean
                      passwordLifetime:
                        default: 90
                        description: password should change after the days
                        type: integer
          description: success
      summary: Set account security policy
      tags:
      - security
  /system/security/certmgmt/certs:
    get:
      parameters:
      - description: show certificates of particular apps
        in: query
        name: app
        schema:
          type: string
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - app: system
                  name: https
                  displayName: Https
                  cert:
                    name: default.crt
                    expiredAt: "2022-12-23T13:24:52Z"
                    subjectNames:
                      country: ["TW"] 
                      state: ["Taiwan"]
                      locality: ["New Taipei City"]
                      organization: ["Moxa Ltd"]
                      commonName: "ThingsPro Edge Root CA for HTTPS"
                      issuer: "ThingsPro Edge Root CA for HTTPS"
                    status: "valid"
                  rootCA:
                    name: rootCA.cer
                    expiredAt: "2050-12-31T13:24:52Z"
                    subjectNames:
                      country: ["TW"] 
                      state: ["Taiwan"]
                      locality: ["New Taipei City"]
                      organization: ["Moxa Ltd"]
                      commonName: "ThingsPro Edge Root CA for HTTPS"
                      issuer: "ThingsPro Edge Root CA for HTTPS"
                    status: "expired"
              schema:
                properties:
                  count:
                    type: integer
                    description: Numbers of certificates
                  data:
                    type: array
                    items:
                      properties:
                        app:
                          description: certificate belongs to which APP
                          type: string
                        name:
                          description: profile name of certificate
                          type: string
                        displayName:
                          description: show name of certificate
                          type: string
                        cert:
                          type: object
                          properties:
                            name:
                              type: string
                            expiredAt:
                              description: expired time of certificate
                              type: string
                            status:
                              description: expire status
                              enum:
                              - valid
                              - expiring
                              - expired
                            subjectNames:
                              type: object
                              properties:
                                country:
                                  type: array
                                  items:
                                    type: string
                                  description: Country
                                state:
                                  type: array
                                  items:
                                    type: string
                                  description: State or Province Name
                                locality:
                                  type: array
                                  items:
                                    type: string
                                  description: Locality
                                organization:
                                  type: array
                                  items:
                                    type: string
                                  description: Organization
                                commonName:
                                  type: string
                                  description: Common Name
                                issuer:
                                  type: string
                                  description: Certificate Issuer
                        rootCA:
                          type: object
                          properties:
                            name:
                              type: string
                            expiredAt:
                              description: expired time of certificate
                              type: string
                            status:
                              description: expire status
                              enum:
                              - valid
                              - expiring
                              - expired
                            subjectNames:
                              type: object
                              properties:
                                country:
                                  type: array
                                  items:
                                    type: string
                                  description: Country
                                state:
                                  type: array
                                  items:
                                    type: string
                                  description: State or Province Name
                                locality:
                                  type: array
                                  items:
                                    type: string
                                  description: Locality
                                organization:
                                  type: array
                                  items:
                                    type: string
                                  description: Organization
                                commonName:
                                  type: string
                                  description: Common Name
                                issuer:
                                  type: string
                                  description: Certificate Issuer
                        location:
                          description: directory of certificates on host storage
                          type: string
          description: success
      summary: List certificates
      tags:
      - security
    post:
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  description: unique name of certificate profile
                  type: string
                displayName:
                  description: display name of certificate profile
                  type: string
                app:
                  description: certificate belongs to which APP
                  type: string
                certContent:
                  description: content of certificate
                  type: string
                certName:
                  description: file name of certificate
                  type: string
                keyContent:
                  description: content of private key
                  type: string
                keyName:
                  description: file name of private key
                  type: string
                caContent:
                  description: content of parent CA certificate
                  type: string
                caName:
                  description: file name of parent CA key
                  type: string
          multipart/form-data:
            example:
              app: system
              certFile: binary
              caFile: binary
              name: ota
            schema:
              properties:
                app:
                  type: string
                certFile:
                  format: binary
                  type: string
                caFile:
                  format: binary
                  type: string
                name:
                  type: string
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - app: system
                  name: https
                  displayName: Https
                  cert:
                    name: default.crt
                    expiredAt: "2022-12-23T13:24:52Z"
                    subjectNames:
                      country: ["TW"] 
                      state: ["Taiwan"]
                      locality: ["New Taipei City"]
                      organization: ["Moxa Ltd"]
                      commonName: "ThingsPro Edge Root CA for HTTPS"
                      issuer: "ThingsPro Edge Root CA for HTTPS"
                    status: "valid"
                  rootCA:
                    name: rootCA.cer
                    expiredAt: "2050-12-31T13:24:52Z"
                    subjectNames:
                      country: ["TW"] 
                      state: ["Taiwan"]
                      locality: ["New Taipei City"]
                      organization: ["Moxa Ltd"]
                      commonName: "ThingsPro Edge Root CA for HTTPS"
                      issuer: "ThingsPro Edge Root CA for HTTPS"
              schema:
                properties:
                  data:
                    type: array
                    items:
                      properties:
                        app:
                          description: certificate belongs to which APP
                          type: string
                        name:
                          description: profile name of certificate
                          type: string
                        displayName:
                          description: show name of certificate
                          type: string
                        cert:
                          type: object
                          properties:
                            name:
                              type: string
                            expiredAt:
                              description: expired time of certificate
                              type: string
                            status:
                              description: expire status
                              enum:
                              - valid
                              - expiring
                              - expired
                            subjectNames:
                              type: object
                              properties:
                                country:
                                  type: array
                                  items:
                                    type: string
                                  description: Country
                                state:
                                  type: array
                                  items:
                                    type: string
                                  description: State or Province Name
                                locality:
                                  type: array
                                  items:
                                    type: string
                                  description: Locality
                                organization:
                                  type: array
                                  items:
                                    type: string
                                  description: Organization
                                commonName:
                                  type: string
                                  description: Common Name
                                issuer:
                                  type: string
                                  description: Certificate Issuer
                        rootCA:
                          type: object
                          properties:
                            name:
                              type: string
                            expiredAt:
                              description: expired time of certificate
                              type: string
                            status:
                              description: expire status
                              enum:
                              - valid
                              - expiring
                              - expired
                            subjectNames:
                              type: object
                              properties:
                                country:
                                  type: array
                                  items:
                                    type: string
                                  description: Country
                                state:
                                  type: array
                                  items:
                                    type: string
                                  description: State or Province Name
                                locality:
                                  type: array
                                  items:
                                    type: string
                                  description: Locality
                                organization:
                                  type: array
                                  items:
                                    type: string
                                  description: Organization
                                commonName:
                                  type: string
                                  description: Common Name
                                issuer:
                                  type: string
                                  description: Certificate Issuer
          description: success
      summary: Create a certificate
      tags:
      - security
  /system/security/certmgmt/certs/{app}/{name}:
    get:
      parameters:
      - description: app name
        in: path
        name: app
        required: true
        schema:
          type: string
      - description: certificate name
        in: path
        name: name
        required: true
        schema:
          type: string
      - description: Indicate to request download
        in: query
        name: download
        required: false
        schema:
          enum:
            - ""
            - "cert"
            - "rootCA"
      - description: show certificate location
        in: query
        name: path
        schema:
          type: boolean
      - description: show certificate with private key
        in: query
        name: privKey
        schema:
          type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  name: https
                  app: system
                  certName: default.crt
                  certContent: "-----BEGIN CERTIFICATE-----"
                  keyName: default.crt
                  keyContent: "-----BEGIN PRIVATE KEY-----"
                  caName: rootCA.cer
                  caContent: "-----BEGIN CERTIFICATE-----"
              schema:
                properties:
                  data:
                    properties:
                      name:
                        description: certificate profile name
                        type: string
                      app:
                        description: whom this certificate belongs to
                        type: string
                      displayName:
                        description: certificate display name
                        type: string  
                      certName:
                        description: certificate name
                        type: string
                      certContent:
                        description: certificate content
                        type: string
                      keyName:
                        description: private key name
                        type: string
                      keyContent:
                        description: private key content
                        type: string
                      caName:
                        description: CA certificate name
                        type: string
                      caContent:
                        description: CA certificate content
                        type: string
            application/tar+gz:
              schema:
                format: binary
                type: string
          description: |
            success to return target compressed certificate file - *.tar.gz
        400:
          description: Cert name not found
      summary: Export configurations
      tags:
      - security
    delete:
      responses:
        204:
          description: success
      summary: Delete certificate by name
      tags:
      - security
  /system/security/fail2ban/banned:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - 10.144.48.106
              schema:
                properties:
                  count:
                    type: integer
                  data:
                    items:
                      description: IP Address
                      type: string
                    type: array
          description: success
      summary: Get banned records
      tags:
      - security
  /system/security/fail2ban/banned/{ip}:
    delete:
      responses:
        204:
          description: success
      summary: Delete banned IP Address
      tags:
      - security
    parameters:
    - description: IP address
      in: path
      name: ip
      required: true
      schema:
        type: string
  /system/security/fail2ban/configuration:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  bannedDuration: 5
                  bannedDurationMax: 60
                  bannedDurationMin: 1
                  enable: true
                  findDuration: 2
                  findDurationMax: 1440
                  findDurationMin: 1
                  maxRetryCount: 5
                  maxRetryCountMax: 10
                  maxRetryCountMin: 1
              schema:
                properties:
                  data:
                    properties:
                      bannedDuration:
                        default: 5
                        description: Duration in minutes for IP to be banned for.
                        type: integer
                      bannedDurationMax:
                        default: 60
                        readOnly: true
                        type: integer
                      bannedDurationMin:
                        default: 1
                        readOnly: true
                        type: integer
                      enable:
                        default: disable
                        type: boolean
                      findDuration:
                        default: 10
                        description: Duration in minutes to count login failure.
                        type: integer
                      findDurationMax:
                        default: 1440
                        readOnly: true
                        type: integer
                      findDurationMin:
                        default: 1
                        readOnly: true
                        type: integer
                      maxRetryCount:
                        default: 5
                        description: Number of matches which triggers ban action on
                          the IP.
                        type: integer
                      maxRetryCountMax:
                        default: 10
                        readOnly: true
                        type: integer
                      maxRetryCountMin:
                        default: 1
                        readOnly: true
                        type: integer
          description: success
      summary: Get fail2ban configuration
      tags:
      - security
    put:
      requestBody:
        content:
          application/json:
            example:
              bannedDuration: 5
              bannedDurationMax: 60
              bannedDurationMin: 1
              enable: true
              findDuration: 2
              findDurationMax: 1440
              findDurationMin: 1
              maxRetryCount: 5
              maxRetryCountMax: 10
              maxRetryCountMin: 1
            schema:
              properties:
                bannedDuration:
                  default: 5
                  description: Duration in minutes for IP to be banned for.
                  type: integer
                bannedDurationMax:
                  default: 60
                  readOnly: true
                  type: integer
                bannedDurationMin:
                  default: 1
                  readOnly: true
                  type: integer
                enable:
                  default: disable
                  type: boolean
                findDuration:
                  default: 10
                  description: Duration in minutes to count login failure.
                  type: integer
                findDurationMax:
                  default: 1440
                  readOnly: true
                  type: integer
                findDurationMin:
                  default: 1
                  readOnly: true
                  type: integer
                maxRetryCount:
                  default: 5
                  description: Number of matches which triggers ban action on the
                    IP.
                  type: integer
                maxRetryCountMax:
                  default: 10
                  readOnly: true
                  type: integer
                maxRetryCountMin:
                  default: 1
                  readOnly: true
                  type: integer
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  bannedDuration: 5
                  bannedDurationMax: 60
                  bannedDurationMin: 1
                  enable: true
                  findDuration: 2
                  findDurationMax: 1440
                  findDurationMin: 1
                  maxRetryCount: 5
                  maxRetryCountMax: 10
                  maxRetryCountMin: 1
              schema:
                properties:
                  data:
                    properties:
                      bannedDuration:
                        default: 5
                        description: Duration in minutes for IP to be banned for.
                        type: integer
                      bannedDurationMax:
                        default: 60
                        readOnly: true
                        type: integer
                      bannedDurationMin:
                        default: 1
                        readOnly: true
                        type: integer
                      enable:
                        default: disable
                        type: boolean
                      findDuration:
                        default: 10
                        description: Duration in minutes to count login failure.
                        type: integer
                      findDurationMax:
                        default: 1440
                        readOnly: true
                        type: integer
                      findDurationMin:
                        default: 1
                        readOnly: true
                        type: integer
                      maxRetryCount:
                        default: 5
                        description: Number of matches which triggers ban action on
                          the IP.
                        type: integer
                      maxRetryCountMax:
                        default: 10
                        readOnly: true
                        type: integer
                      maxRetryCountMin:
                        default: 1
                        readOnly: true
                        type: integer
          description: success
      summary: Set fail2ban configuration
      tags:
      - security
  /system/security/loginmessage:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  failureMessage: The account or password you entered is not correct.
                    (Your account will be temporarily locked if excessive tried)
                  welcomeMessage: ""
              schema:
                properties:
                  data:
                    properties:
                      failureMessage:
                        description: message of login failure
                        type: string
                      welcomeMessage:
                        description: message of welcome
                        type: string
          description: success
      summary: Get login message
      tags:
      - security
    put:
      requestBody:
        content:
          application/json:
            example:
              failureMessage: The account or password you entered is not correct.
                (Your account will be temporarily locked if excessive tried)
              welcomeMessage: ""
            schema:
              properties:
                failureMessage:
                  description: message of login failure
                  type: string
                welcomeMessage:
                  description: message of welcome
                  type: string
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  failureMessage: The account or password you entered is not correct.
                    (Your account will be temporarily locked if excessive tried)
                  welcomeMessage: ""
              schema:
                properties:
                  data:
                    properties:
                      failureMessage:
                        description: message of login failure
                        type: string
                      welcomeMessage:
                        description: message of welcome
                        type: string
          description: success
      summary: Set login message
      tags:
      - security
  /system/serialconsole:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable serial console
                        type: boolean
          description: success
      summary: Get serial console status
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              enable: true
            schema:
              properties:
                enable:
                  description: enable serial console
                  type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable serial console
                        type: boolean
          description: success
      summary: Set serial console configuration
      tags:
      - systems
  /system/services:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  cloudConnectivity:
                  - available: true
                    enable: true
                    id: cloud
                  network:
                  - available: true
                    enable: true
                    id: wifi
                  - available: true
                    enable: true
                    id: cellular
                  - available: true
                    enable: true
                    id: lan1
                  - available: true
                    enable: true
                    id: lan2
                  - available: false
                    enable: false
                    id: dhcpserver1
                  - available: true
                    enable: false
                    id: dhcpserver2
                  protocol:
                  - available: true
                    enable: true
                    id: modbusmaster
                  - available: true
                    enable: true
                    id: eipscanner
                  - available: true
                    enable: true
                    id: opcuaserver
                  provisionService:
                  - available: true
                    enable: true
                    id: provision
                  - available: true
                    enable: true
                    id: provisionschedule
                  service:
                  - available: true
                    enable: false
                    id: httpservice
                  - available: true
                    enable: true
                    id: httpsservice
                  - available: true
                    enable: true
                    id: ntp
                  - available: true
                    enable: true
                    id: sshserver
                  - available: true
                    enable: true
                    id: localconsole
                  - available: true
                    enable: false
                    id: sdcard
                  - available: true
                    enable: true
                    id: syslog
                  - available: true
                    enable: true
                    id: eventlog
              schema:
                properties:
                  data:
                    properties:
                      network:
                        items:
                          properties:
                            available:
                              description: service available
                              type: boolean
                            enable:
                              description: service status
                              type: boolean
                            id:
                              description: service name
                              type: string
                        type: array
          description: success
      summary: Get system services
      tags:
      - systems
  /system/services/{id}/disable:
    parameters:
    - description: service name
      in: path
      name: id
      required: true
      schema:
        enum:
        - dhcpserver1
        - dhcpserver2
        - httpservice
        - httpsservice
        - sshserver
        - localconsole
        - lan1
        - lan2
        - cloud
        - modbusmaster
        - eipscanner
        - opcuaserver
        - sdcard
        - ntp
        - eventlog
        - syslog
        - wifi
        - cellular
        - provision
        - provisionschedule
        type: string
    put:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: false
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: service status
                        type: boolean
          description: success
      summary: Disable system service
      tags:
      - systems
  /system/services/{id}/enable:
    parameters:
    - description: service name
      in: path
      name: id
      required: true
      schema:
        enum:
        - dhcpserver1
        - dhcpserver2
        - httpservice
        - httpsservice
        - sshserver
        - localconsole
        - lan1
        - lan2
        - cloud
        - modbusmaster
        - eipscanner
        - opcuaserver
        - sdcard
        - ntp
        - eventlog
        - syslog
        - wifi
        - cellular
        - provision
        - provisionschedule
        type: string
    put:
      description: |
        enable system services including Web GUI `edge-web`,
        DHCP Server `dhcpserverX`, Discovery `discovery`,
        HTTP service `httpservice` and so on.
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: service status
                        type: boolean
          description: success
      summary: Enable system service
      tags:
      - systems
  /system/smtp:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enableAuth: false
                  fromMail: ""
                  mailServer: smtp.gmail.com
                  password: ""
                  port: 465
                  toMailList: null
                  username: ""
              schema:
                properties:
                  data:
                    properties:
                      enableAuth:
                        default: false
                        type: boolean
                      fromMail:
                        default: ""
                        type: string
                      mailServer:
                        default: smtp.gmail.com
                        description: mail server address
                        type: string
                      password:
                        default: ""
                        type: string
                      port:
                        default: 465
                        description: mail server port
                        maximum: 65535
                        minimum: 0
                        type: integer
                      toMailList:
                        description: toMail address list
                        items:
                          type: string
                        type: array
                      username:
                        default: ""
                        type: string
          description: success
      summary: Get configuration of SMTP
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              enableAuth: true
              fromMail: lance@gmail.com
              mailServer: smtp.gmail.com
              password: moxa
              port: 587
              toMailList:
              - eric@moxa.com
              - chris@gmail.com
              - ray@hotmail.com
              - ricky@yahoo.com
              username: moxa
            schema:
              properties:
                enableAuth:
                  default: false
                  type: boolean
                fromMail:
                  default: ""
                  type: string
                mailServer:
                  default: smtp.gmail.com
                  description: mail server address
                  type: string
                password:
                  default: ""
                  type: string
                port:
                  default: 465
                  description: mail server port
                  maximum: 65535
                  minimum: 0
                  type: integer
                toMailList:
                  description: toMail address list
                  items:
                    type: string
                  type: array
                username:
                  default: ""
                  type: string
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enableAuth: true
                  fromMail: lance@gmail.com
                  mailServer: smtp.gmail.com
                  password: moxa
                  port: 587
                  toMailList:
                  - eric@moxa.com
                  - chris@gmail.com
                  - ray@hotmail.com
                  - ricky@yahoo.com
                  username: moxa
              schema:
                properties:
                  data:
                    properties:
                      enableAuth:
                        default: false
                        type: boolean
                      fromMail:
                        default: ""
                        type: string
                      mailServer:
                        default: smtp.gmail.com
                        description: mail server address
                        type: string
                      password:
                        default: ""
                        type: string
                      port:
                        default: 465
                        description: mail server port
                        maximum: 65535
                        minimum: 0
                        type: integer
                      toMailList:
                        description: toMail address list
                        items:
                          type: string
                        type: array
                      username:
                        default: ""
                        type: string
          description: success
      summary: Set configuration of SMTP
      tags:
      - systems
  /system/smtp/send-mail:
    put:
      requestBody:
        content:
          application/json:
            example:
              mailBody:
                alertMessage: 'MGate 5105-MB-EIP alert (S/N:MOXA00000121, 10.144.8.51,
                  00:90:E8:00:33:FF): 2020-09-03, 07:45:16 Power input 2 failure'
                serverName: MGate 5105_121
              mailSubject: MGate 5105-MB-EIP alert
            schema:
              properties:
                mailBody:
                  properties:
                    alertMessage:
                      type: string
                    serverName:
                      type: string
                mailSubject:
                  type: string
              type: object
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  mailBody:
                    alertMessage: 'MGate 5105-MB-EIP alert (S/N:MOXA00000121, 10.144.8.51,
                      00:90:E8:00:33:FF): 2020-09-03, 07:45:16 Power input 2 failure'
                    serverName: MGate 5105_121
                  mailSubject: MGate 5105-MB-EIP alert
              schema:
                properties:
                  data:
                    properties:
                      mailBody:
                        properties:
                          alertMessage:
                            type: string
                          serverName:
                            type: string
                      mailSubject:
                        type: string
          description: success
      summary: Send mail alert
      tags:
      - systems
  /system/sshserver:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
                  port: 22
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable SSH
                        type: boolean
                      port:
                        description: port to listen
                        type: integer
          description: success
      summary: Get SSH configuration
      tags:
      - systems
    put:
      requestBody:
        content:
          application/json:
            example:
              enable: true
              port: 22
            schema:
              properties:
                enable:
                  description: enable SSH
                  type: boolean
                port:
                  description: port to listen
                  type: integer
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enable: true
                  port: 22
              schema:
                properties:
                  data:
                    properties:
                      enable:
                        description: enable SSH
                        type: boolean
                      port:
                        description: port to listen
                        type: integer
          description: success
      summary: Set SSH configuration
      tags:
      - systems
  /system/upgrade:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  allowOverCellular: true
                  caName: ca.crt
                  certFileName: client.crt
                  disks:
                  - device: /dev/root
                    free: 2856562688
                    mount: /
                    name: System
                    percent: 47.74261663447114
                    protect: 838860800
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 2609770496
                  - device: /dev/mmcblk0p1
                    free: 7423197184
                    mount: /media/sd-mmcblk0p1
                    name: SD1-1
                    percent: 6.752996575342466
                    protect: 0
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 7960788992
                    used: 537591808
                  enableClientAuth: false
                  enableSnapshot: false
                  isSnapshotSupported: true
                  keyFileName: client.key
                  retryCount: 3
                  retryInterval: 5
                  targetDiskName: SD1-1
              schema:
                properties:
                  data:
                    properties:
                      allowOverCellular:
                        description: allow upgrade over the cellular
                        type: boolean
                      disks:
                        description: disk list
                        items:
                          type: object
                      enableClientAuth:
                        description: use cert and key as X.509 client authentication
                        type: boolean
                      enableSnapshot:
                        description: do snapshot during upgrade. If the device doesn’t
                          support snapshot feature (isSnapshotSupported), the request
                          will be rejected with an error.
                        type: boolean
                      isSnapshotSupported:
                        description: whether supports snapshot
                        type: boolean
                      retryCount:
                        description: maximum re-try count to download upgrade package.
                          0 means unlimited.
                        type: integer
                      retryInterval:
                        description: re-try interval in seconds to download upgrade
                          package.
                        type: integer
                      targetDiskName:
                        description: disk partition name to store upgrade file
                        type: string
          description: success
      summary: Get upgrade configuration
      tags:
      - upgrade
    patch:
      requestBody:
        content:
          application/json:
            schema:
              properties:
                allowOverCellular:
                  description: allow upgrade over the cellular
                  type: boolean
                disks:
                  description: disk list
                  items:
                    type: object
                enableClientAuth:
                  description: use cert and key as X.509 client authentication
                  type: boolean
                enableSnapshot:
                  description: do snapshot during upgrade. If the device doesn’t support
                    snapshot feature (isSnapshotSupported), the request will be rejected
                    with an error.
                  type: boolean
                isSnapshotSupported:
                  description: whether supports snapshot
                  type: boolean
                retryCount:
                  description: maximum re-try count to download upgrade package. 0
                    means unlimited.
                  type: integer
                retryInterval:
                  description: re-try interval in seconds to download upgrade package.
                  type: integer
                targetDiskName:
                  description: disk partition name to store upgrade file
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  allowOverCellular: true
                  caName: ca.crt
                  certFileName: client.crt
                  disks:
                  - device: /dev/root
                    free: 2856562688
                    mount: /
                    name: System
                    percent: 47.74261663447114
                    protect: 838860800
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 2609770496
                  - device: /dev/mmcblk0p1
                    free: 7423197184
                    mount: /media/sd-mmcblk0p1
                    name: SD1-1
                    percent: 6.752996575342466
                    protect: 0
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 7960788992
                    used: 537591808
                  enableClientAuth: false
                  enableSnapshot: false
                  isSnapshotSupported: true
                  keyFileName: client.key
                  retryCount: 3
                  retryInterval: 5
                  targetDiskName: SD1-1
              schema:
                properties:
                  data:
                    properties:
                      allowOverCellular:
                        description: allow upgrade over the cellular
                        type: boolean
                      disks:
                        description: disk list
                        items:
                          type: object
                      enableClientAuth:
                        description: use cert and key as X.509 client authentication
                        type: boolean
                      enableSnapshot:
                        description: do snapshot during upgrade. If the device doesn’t
                          support snapshot feature (isSnapshotSupported), the request
                          will be rejected with an error.
                        type: boolean
                      isSnapshotSupported:
                        description: whether supports snapshot
                        type: boolean
                      retryCount:
                        description: maximum re-try count to download upgrade package.
                          0 means unlimited.
                        type: integer
                      retryInterval:
                        description: re-try interval in seconds to download upgrade
                          package.
                        type: integer
                      targetDiskName:
                        description: disk partition name to store upgrade file
                        type: string
          description: success
      summary: Set upgrade configuration partially
      tags:
      - upgrade
    put:
      requestBody:
        content:
          application/json:
            example:
              allowOverCellular: true
              ca: xxxxxx
              caFilename: ca.crt
              cert: xxxxxxx
              certFilename: a.crt
              enableClientAuth: true
              enableSnapshot: true
              key: xxxxx
              keyFilename: a.key
              retryCount: 3
              retryInterval: 0
              targetDiskName: System
            schema:
              properties:
                allowOverCellular:
                  description: allow upgrade over the cellular
                  type: boolean
                ca:
                  description: CA content
                  type: string
                caFilename:
                  description: filename of CA
                  type: string
                cert:
                  description: certificate content
                  type: string
                certFilename:
                  description: filename of client authentication certificate
                  type: string
                disks:
                  description: disk list
                  items:
                    type: object
                enableClientAuth:
                  description: use cert and key as X.509 client authentication
                  type: boolean
                enableSnapshot:
                  description: do snapshot during upgrade. If the device doesn’t support
                    snapshot feature (isSnapshotSupported), the request will be rejected
                    with an error.
                  type: boolean
                isSnapshotSupported:
                  description: whether supports snapshot
                  type: boolean
                key:
                  description: key content
                  type: string
                keyFilename:
                  description: filename of client authentication key
                  type: string
                retryCount:
                  description: maximum re-try count to download upgrade package. 0
                    means unlimited.
                  type: integer
                retryInterval:
                  description: re-try interval in seconds to download upgrade package.
                  type: integer
                targetDiskName:
                  description: partition to store upgrade file
                  type: string
          multipart/form-data:
            encoding:
              certFile:
                explode: false
                style: form
            example:
              allowOverCellular: true
              caFile: file
              certFile: file
              enableClientAuth: true
              enableSnapshot: true
              keyFile: file
              retryCount: 3
              retryInterval: 0
              targetDiskName: System
            schema:
              properties:
                allowOverCellular:
                  description: allow upgrade over the cellular
                  type: boolean
                caFile:
                  description: CA content
                  format: binary
                  type: string
                certFile:
                  description: certificate content
                  format: binary
                  type: string
                disks:
                  description: disk list
                  items:
                    type: object
                enableClientAuth:
                  description: use cert and key as X.509 client authentication
                  type: boolean
                enableSnapshot:
                  description: do snapshot during upgrade. If the device doesn’t support
                    snapshot feature (isSnapshotSupported), the request will be rejected
                    with an error.
                  type: boolean
                isSnapshotSupported:
                  description: whether supports snapshot
                  type: boolean
                keyFile:
                  description: key content
                  format: binary
                  type: string
                retryCount:
                  description: maximum re-try count to download upgrade package. 0
                    means unlimited.
                  type: integer
                retryInterval:
                  description: re-try interval in seconds to download upgrade package.
                  type: integer
                targetDiskName:
                  description: partition to store upgrade file
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  allowOverCellular: true
                  caName: ca.crt
                  certFileName: client.crt
                  disks:
                  - device: /dev/root
                    free: 2856562688
                    mount: /
                    name: System
                    percent: 47.74261663447114
                    protect: 838860800
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 5731123200
                    used: 2609770496
                  - device: /dev/mmcblk0p1
                    free: 7423197184
                    mount: /media/sd-mmcblk0p1
                    name: SD1-1
                    percent: 6.752996575342466
                    protect: 0
                    tags:
                      free: systemDiskFree
                      percent: systemDiskPercent
                      used: systemDiskUsed
                    total: 7960788992
                    used: 537591808
                  enableClientAuth: false
                  enableSnapshot: false
                  isSnapshotSupported: true
                  keyFileName: client.key
                  retryCount: 3
                  retryInterval: 5
                  targetDiskName: SD1-1
              schema:
                properties:
                  data:
                    properties:
                      allowOverCellular:
                        description: allow upgrade over the cellular
                        type: boolean
                      disks:
                        description: disk list
                        items:
                          type: object
                      enableClientAuth:
                        description: use cert and key as X.509 client authentication
                        type: boolean
                      enableSnapshot:
                        description: do snapshot during upgrade. If the device doesn’t
                          support snapshot feature (isSnapshotSupported), the request
                          will be rejected with an error.
                        type: boolean
                      isSnapshotSupported:
                        description: whether supports snapshot
                        type: boolean
                      retryCount:
                        description: maximum re-try count to download upgrade package.
                          0 means unlimited.
                        type: integer
                      retryInterval:
                        description: re-try interval in seconds to download upgrade
                          package.
                        type: integer
                      targetDiskName:
                        description: disk partition name to store upgrade file
                        type: string
          description: success
      summary: Set upgrade configuration
      tags:
      - upgrade
  /upgrades:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 2
                data:
                - completedAt: null
                  completedTask: 0
                  createdAt: "2020-02-24T10:59:11.63206964+08:00"
                  id: 1
                  isDeleted: false
                  lastState: ""
                  owner: system
                  parameter:
                    at: null
                    deleteFileAfterInstallComplete: true
                    download: true
                    id: null
                    install: false
                    snapshot: true
                    url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                  pendingAt: null
                  startedAt: null
                  state: created
                  tasks:
                  - completedAt: null
                    id: 1
                    name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                    progress: 0
                    startedAt: null
                    state: created
                    totalSize: 213375528
                    type: download
                  totalTask: 1
                  triggerdAt: null
                - /upgrades/{id}/{action}: null
                  completedAt: null
                  completedTask: 0
                  createdAt: "2020-02-24T10:59:14.67798968+08:00"
                  id: 2
                  isDeleted: false
                  lastState: ""
                  owner: system
                  parameter:
                    at: null
                    deleteFileAfterInstallComplete: true
                    download: true
                    id: null
                    install: false
                    snapshot: true
                    url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                  pendingAt: null
                  startedAt: null
                  state: created
                  tasks:
                  - completedAt: null
                    id: 2
                    name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                    progress: 0
                    startedAt: null
                    state: created
                    totalSize: 213375528
                    type: download
                  totalTask: 1
                  triggerdAt: null
              schema:
                properties:
                  count:
                    type: integer
                  data:
                    properties:
                      completedAt:
                        format: date-time
                        type: string
                      completedTask:
                        type: integer
                      createdAt:
                        format: date-time
                        type: string
                      errorMessage:
                        description: appear when state is failed
                        type: string
                      id:
                        type: integer
                      isDeleted:
                        description: is download file deleted?
                        type: boolean
                      lastState:
                        description: When suspended, lastState is the last active
                          state
                        type: string
                      owner:
                        description: User whom creating this job
                        type: string
                      parameter:
                        properties:
                          at:
                            description: Run the job periodically
                            properties:
                              day:
                                type: string
                              dayOfWeek:
                                type: string
                              hour:
                                type: string
                              minute:
                                type: string
                              month:
                                type: string
                          deleteFileAfterInstallComplete:
                            description: Delete installation file after upgrade completed
                              (default:true)
                            type: boolean
                          download:
                            description: Indicate to request download
                            type: boolean
                          file:
                            description: (form-data) file for Debian package
                            type: string
                          id:
                            description: Upgrade ID
                            type: integer
                          install:
                            description: Indicate to request install
                            type: boolean
                          snapshot:
                            description: Do snapshot when installation. If not set,
                              it will apply by default configuration of `/system/upgrade`.
                            type: boolean
                          url:
                            description: URL to download
                            type: string
                      pendingAt:
                        format: date-time
                        type: string
                      startedAt:
                        format: date-time
                        type: string
                      state:
                        enum:
                        - created
                        - pending
                        - running
                        - succeed
                        - failed
                        - canceling
                        - canceled
                        - suppending
                        - suppended
                        - resuming
                        type: string
                      tasks:
                        items:
                          properties:
                            completedAt:
                              format: date-time
                              type: string
                            id:
                              type: integer
                            name:
                              description: task name
                              type: string
                            progress:
                              description: Progress in percentage
                              maximum: 100
                              minimum: 0
                              type: integer
                            speed:
                              description: download speed in KBps
                              type: integer
                            startedAt:
                              format: date-time
                              type: string
                            state:
                              enum:
                              - created
                              - pending
                              - running
                              - succeed
                              - failed
                              - canceling
                              - canceled
                              - suppending
                              - suppended
                              - resuming
                              type: string
                            totalSize:
                              description: file size in bytes
                              type: integer
                            type:
                              enum:
                              - download
                              - install
                              type: string
                      totalTask:
                        type: integer
                      triggerAt:
                        description: null if not set
                        format: date-time
                        type: string
          description: success
      summary: Retrieve all upgrade jobs
      tags:
      - upgrade
    post:
      requestBody:
        content:
          application/json:
            examples:
              downloadAndInstall:
                summary: download and install immediately
                value:
                  deleteFileAfterInstallComplete: true
                  install: true
                  url: https://mxswdc2.s3-ap-northeast-1.amazonaws.com/v3/edge/builds/edge-core-update/release/iotedge/v1.1.0/275/package_1.1.0-275-uc-8112a-me_armhf.yaml
              downloadOnly:
                summary: download only
                value:
                  install: false
                  url: https://mxswdc2.s3-ap-northeast-1.amazonaws.com/v3/edge/builds/edge-core-update/release/iotedge/v1.1.0/275/package_1.1.0-275-uc-8112a-me_armhf.yaml
              installAtSpecifiedTime:
                summary: start to install at specified time
                value:
                  at:
                    day: '*'
                    dayOfWeek: '*'
                    hour: "13"
                    minute: "0"
                    month: '*'
                  id: 1
              installOnly:
                summary: install by upgrade ID
                value:
                  id: 1
            schema:
              properties:
                at:
                  description: Run the job periodically
                  properties:
                    day:
                      type: string
                    dayOfWeek:
                      type: string
                    hour:
                      type: string
                    minute:
                      type: string
                    month:
                      type: string
                deleteFileAfterInstallComplete:
                  description: Delete installation file after upgrade completed (default:true)
                  type: boolean
                download:
                  description: Indicate to request download
                  type: boolean
                file:
                  description: (form-data) file for Debian package
                  type: string
                id:
                  description: Upgrade ID
                  type: integer
                install:
                  description: Indicate to request install
                  type: boolean
                snapshot:
                  description: Do snapshot when installation. If not set, it will
                    apply by default configuration of `/system/upgrade`.
                  type: boolean
                url:
                  description: URL to download
                  type: string
          multipart/form-data:
            schema:
              properties:
                at:
                  description: Run the job periodically
                  properties:
                    day:
                      type: string
                    dayOfWeek:
                      type: string
                    hour:
                      type: string
                    minute:
                      type: string
                    month:
                      type: string
                deleteFileAfterInstallComplete:
                  description: Delete installation file after upgrade completed (default:true)
                  type: boolean
                download:
                  description: Indicate to request download
                  type: boolean
                file:
                  description: (form-data) file for Debian package
                  type: string
                id:
                  description: Upgrade ID
                  type: integer
                install:
                  description: Indicate to request install
                  type: boolean
                snapshot:
                  description: Do snapshot when installation. If not set, it will
                    apply by default configuration of `/system/upgrade`.
                  type: boolean
                url:
                  description: URL to download
                  type: string
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  completedAt: null
                  completedTask: 0
                  createdAt: "2020-02-24T10:57:38.28929348+08:00"
                  id: 12
                  isDeleted: false
                  lastState: ""
                  owner: system
                  parameter:
                    at: null
                    deleteFileAfterInstallComplete: true
                    download: true
                    id: null
                    install: false
                    snapshot: true
                    url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                  pendingAt: null
                  startedAt: null
                  state: created
                  tasks:
                  - completedAt: null
                    id: 57
                    name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                    progress: 0
                    startedAt: null
                    state: created
                    totalSize: 213375528
                    type: download
                  totalTask: 1
                  triggerdAt: null
          description: success
        400:
          description: unsupported file format
      summary: Create upgrade job
      tags:
      - upgrade
    put:
      parameters:
      - description: id of upgrade pack
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: id of upgrade pack
        in: path
        name: action
        required: true
        schema:
          enum:
          - start
          - cancel
          - suspend
          - resume
          type: string
      - description: Delete upgrade file after upgrade completed (default:true)
        in: path
        name: deleteFileAfterInstallComplete
        required: true
        schema:
          type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  completedAt: "2020-02-24T11:00:28.75763008+08:00"
                  completedTask: 0
                  createdAt: "2020-02-24T10:59:11.63206964+08:00"
                  id: 1
                  isDeleted: false
                  lastState: running
                  owner: system
                  parameter:
                    at: null
                    deleteFileAfterInstallComplete: true
                    download: true
                    id: null
                    install: false
                    snapshot: true
                    url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                  pendingAt: "2020-02-24T11:00:12.61542208+08:00"
                  startedAt: "2020-02-24T11:00:12.63342556+08:00"
                  state: canceled
                  tasks:
                  - completedAt: "2020-02-24T11:00:28.72362264+08:00"
                    id: 1
                    name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                    progress: 0
                    startedAt: "2020-02-24T11:00:12.78006724+08:00"
                    state: canceled
                    totalSize: 213375528
                    type: download
                  totalTask: 1
                  triggerdAt: null
          description: success
        400:
          description: state is not allowed to change
      summary: Operate the upgrade
      tags:
      - upgrade
  /upgrades/{id}:
    delete:
      responses:
        204:
          description: success
        400:
          description: file had been deleted
        404:
          description: job not found
      summary: Delete upgrade job
      tags:
      - upgrade
    get:
      responses:
        200:
          content:
            application/json:
              examples:
                canceled:
                  summary: canceled job
                  value:
                    data:
                      completedAt: "2020-02-24T10:54:27.16629856+08:00"
                      completedTask: 0
                      createdAt: "2020-02-24T10:51:17.57571124+08:00"
                      id: 9
                      isDeleted: false
                      lastState: running
                      owner: system
                      parameter:
                        at: null
                        deleteFileAfterInstallComplete: true
                        download: true
                        id: null
                        install: false
                        snapshot: true
                        url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                      pendingAt: "2020-02-24T10:51:23.4746076+08:00"
                      startedAt: "2020-02-24T10:51:23.50617604+08:00"
                      state: canceled
                      tasks:
                      - completedAt: "2020-02-24T10:54:27.05335256+08:00"
                        id: 54
                        name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                        progress: 2
                        speed: 3670
                        startedAt: "2020-02-24T10:51:23.57414428+08:00"
                        state: canceled
                        totalSize: 213375528
                        type: download
                      totalTask: 1
                      triggerdAt: null
                completed:
                  summary: completed installation
                  value:
                    data:
                      completedAt: "2020-02-18T16:40:20.3056944+08:00"
                      completedTask: 12
                      createdAt: "2020-02-18T16:21:13.64273504+08:00"
                      id: 6
                      isDeleted: true
                      lastState: ""
                      owner: system
                      parameter:
                        at: null
                        deleteFileAfterInstallComplete: true
                        download: true
                        id: null
                        install: true
                        snapshot: false
                        url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1076/update_2.0.0-1076-uc-8112a-me-iotedge_armhf.deb
                      pendingAt: "2020-02-18T16:23:42.3504006+08:00"
                      startedAt: "2020-02-18T16:23:42.3849478+08:00"
                      state: succeed
                      tasks:
                      - completedAt: "2020-02-18T16:26:44.6263696+08:00"
                        id: 38
                        name: update_2.0.0-1076-uc-8112a-me-iotedge_armhf.deb
                        progress: 100
                        speed: 1215
                        startedAt: "2020-02-18T16:23:42.96726164+08:00"
                        state: succeed
                        totalSize: 214501856
                        type: download
                      - completedAt: "2020-02-18T16:28:24.18937284+08:00"
                        id: 39
                        name: system-agent
                        progress: 100
                        startedAt: "2020-02-18T16:28:14.46062504+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:28:33.6286498+08:00"
                        id: 40
                        name: moby
                        progress: 100
                        startedAt: "2020-02-18T16:28:24.21569+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:29:32.1599818+08:00"
                        id: 41
                        name: iotedge
                        progress: 100
                        startedAt: "2020-02-18T16:28:33.77385288+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:30:30.087283+08:00"
                        id: 42
                        name: appman
                        progress: 100
                        startedAt: "2020-02-18T16:29:32.19470184+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:33:02.24707172+08:00"
                        id: 43
                        name: tagservice
                        progress: 100
                        startedAt: "2020-02-18T16:30:30.10365956+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:33:03.41367912+08:00"
                        id: 44
                        name: edge-web
                        progress: 100
                        startedAt: "2020-02-18T16:33:02.26589584+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:35:32.08494868+08:00"
                        id: 45
                        name: device
                        progress: 100
                        startedAt: "2020-02-18T16:33:03.4314002+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:36:42.0024222+08:00"
                        id: 46
                        name: modbusmaster
                        progress: 100
                        startedAt: "2020-02-18T16:35:32.10108564+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:39:54.1495638+08:00"
                        id: 47
                        name: cloud
                        progress: 100
                        startedAt: "2020-02-18T16:36:42.03298536+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:39:56.68418872+08:00"
                        id: 48
                        name: device-configuration
                        progress: 100
                        startedAt: "2020-02-18T16:39:54.17269196+08:00"
                        state: succeed
                        type: install
                      - completedAt: "2020-02-18T16:40:18.75193924+08:00"
                        id: 49
                        name: complete-installation
                        progress: 100
                        startedAt: "2020-02-18T16:40:15.5685226+08:00"
                        state: succeed
                        type: install
                      totalTask: 12
                      triggerdAt: null
                running:
                  summary: running installation
                  value:
                    data:
                      completedAt: null
                      completedTask: 0
                      createdAt: "2020-02-24T10:51:17.57571124+08:00"
                      id: 9
                      isDeleted: false
                      lastState: ""
                      owner: system
                      parameter:
                        at: null
                        deleteFileAfterInstallComplete: true
                        download: true
                        id: null
                        install: false
                        snapshot: true
                        url: http://10.144.48.106:10080/moxaics/v3/edge/builds/edge-core-update/develop/1106/update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                      pendingAt: "2020-02-24T10:51:23.4746076+08:00"
                      startedAt: "2020-02-24T10:51:23.50617604+08:00"
                      state: running
                      tasks:
                      - completedAt: null
                        id: 54
                        name: update_2.0.0-1106-uc-8112a-me-iotedge_armhf.deb
                        progress: 0
                        startedAt: "2020-02-24T10:51:23.57414428+08:00"
                        state: running
                        totalSize: 213375528
                        type: download
                      totalTask: 1
                      triggerdAt: null
              schema:
                properties:
                  data:
                    properties:
                      completedAt:
                        format: date-time
                        type: string
                      completedTask:
                        type: integer
                      createdAt:
                        format: date-time
                        type: string
                      errorMessage:
                        description: appear when state is failed
                        type: string
                      id:
                        type: integer
                      isDeleted:
                        description: is download file deleted?
                        type: boolean
                      lastState:
                        description: When suspended, lastState is the last active
                          state
                        type: string
                      owner:
                        description: User whom creating this job
                        type: string
                      parameter:
                        properties:
                          at:
                            description: Run the job periodically
                            properties:
                              day:
                                type: string
                              dayOfWeek:
                                type: string
                              hour:
                                type: string
                              minute:
                                type: string
                              month:
                                type: string
                          deleteFileAfterInstallComplete:
                            description: Delete installation file after upgrade completed
                              (default:true)
                            type: boolean
                          download:
                            description: Indicate to request download
                            type: boolean
                          file:
                            description: (form-data) file for Debian package
                            type: string
                          id:
                            description: Upgrade ID
                            type: integer
                          install:
                            description: Indicate to request install
                            type: boolean
                          snapshot:
                            description: Do snapshot when installation. If not set,
                              it will apply by default configuration of `/system/upgrade`.
                            type: boolean
                          url:
                            description: URL to download
                            type: string
                      pendingAt:
                        format: date-time
                        type: string
                      startedAt:
                        format: date-time
                        type: string
                      state:
                        enum:
                        - created
                        - pending
                        - running
                        - succeed
                        - failed
                        - canceling
                        - canceled
                        - suppending
                        - suppended
                        - resuming
                        type: string
                      tasks:
                        items:
                          properties:
                            completedAt:
                              format: date-time
                              type: string
                            id:
                              type: integer
                            name:
                              description: task name
                              type: string
                            progress:
                              description: Progress in percentage
                              maximum: 100
                              minimum: 0
                              type: integer
                            speed:
                              description: download speed in KBps
                              type: integer
                            startedAt:
                              format: date-time
                              type: string
                            state:
                              enum:
                              - created
                              - pending
                              - running
                              - succeed
                              - failed
                              - canceling
                              - canceled
                              - suppending
                              - suppended
                              - resuming
                              type: string
                            totalSize:
                              description: file size in bytes
                              type: integer
                            type:
                              enum:
                              - download
                              - install
                              type: string
                      totalTask:
                        type: integer
                      triggerAt:
                        description: null if not set
                        format: date-time
                        type: string
          description: success
      summary: Find upgrade job by ID
      tags:
      - upgrade
    parameters:
    - description: ID of upgrade job
      in: path
      name: id
      required: true
      schema:
        type: integer
  /users:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                count: 1
                data:
                - changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 1
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: admin
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindPasswordExpiredAfter: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  count:
                    type: integer
                  data:
                    $ref: '#/components/schemas/Users'
                type: object
          description: success
      summary: Query users
      tags:
      - users
    post:
      requestBody:
        content:
          application/json:
            example:
              expiredAfter: "2023-01-31T16:00:00.000Z"
              isActive: true
              name: myuser
              password: moxa1234
              roles:
              - id: 1
            schema:
              properties:
                email:
                  type: string
                expiredAfter:
                  format: date-time
                  type: string
                isActive:
                  type: boolean
                name:
                  type: string
                password:
                  description: at least 6 characters
                  type: string
                roles:
                  items:
                    description: ID of role
                    type: integer
              required:
              - name
              - password
              - roles
              - isActive
              - expiredAfter
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
        400:
          content:
            application/json:
              examples:
                filesize:
                  summary: too many users
                  value:
                    error:
                      code: 10000
                      message: too many users
          description: error
      summary: Add user
      tags:
      - users
  /users/{id}:
    delete:
      parameters:
      - description: ID of user
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        204:
          description: success
      summary: Delete user by ID
      tags:
      - users
    get:
      parameters:
      - description: ID of user
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
        400:
          description: bad request
        403:
          description: user without Administrator role can not access this API
      summary: Query user by ID
      tags:
      - users
    put:
      parameters:
      - description: ID of user
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            example:
              email: aa@aaa.aaa
              expiredAfter: null
              isActive: true
              roles:
              - id: 1
            schema:
              properties:
                email:
                  type: string
                expiredAfter:
                  format: date-time
                  type: string
                isActive:
                  type: boolean
                roles:
                  items:
                    type: integer
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
        400:
          description: bad request
        403:
          description: user without Administrator role can not access this API
      summary: Update user by ID
      tags:
      - users
  /users/{id}/password:
    put:
      parameters:
      - description: ID of user
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            example:
              newPassword: "123456"
            schema:
              properties:
                newPassword:
                  type: string
                oldPassword:
                  description: user with admin role do not need pass oldPassword
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
        400:
          description: bad request
        403:
          description: user without Administrator role can not access this API
      summary: Update user's password by ID
      tags:
      - users
  /users/me:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
      summary: Query who I am
      tags:
      - users
    put:
      requestBody:
        content:
          application/json:
            example:
              email: aa@aaa.aaa
              expiredAfter: "2023-01-31T16:00:00.000Z"
              isActive: true
              roles:
              - id: 1
            schema:
              properties:
                email:
                  type: string
                expiredAfter:
                  type: string
                isActive:
                  type: boolean
                roles:
                  items:
                    type: integer
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
      summary: Update current user's information
      tags:
      - users
  /users/me/password:
    put:
      requestBody:
        content:
          application/json:
            example:
              newPassword: "123456"
              oldPassword: moxa1234
            schema:
              properties:
                newPassword:
                  type: string
                oldPassword:
                  description: user with admin role do not need pass oldPassword
                  type: string
        required: true
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  changedPasswordAt: null
                  createdAt: "2019-09-24T05:52:28.912234779Z"
                  email: null
                  expiredAfter: null
                  id: 3
                  isActive: true
                  loginAt: "0001-01-01T00:00:00Z"
                  name: myuser
                  permissions:
                  - SYS_MAINTENANCE_RW
                  - SYS_USER_RW
                  remindToChangePassword: null
                  roles:
                  - id: 1
                    name: Administrator
              schema:
                properties:
                  data:
                    $ref: '#/components/schemas/User'
          description: success
      summary: Update current user's password
      tags:
      - users
  /depends:
    get:
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enabled: true
              schema:
                properties:
                  data:
                    properties:
                      enabled:
                        type: boolean
          description: success
      summary: Get dependency restriction configuration
      tags:
      - depends
    put:
      requestBody:
        content:
          application/json:
            example:
              enabled: true
            schema:
              properties:
                enabled:
                  type: boolean
      responses:
        200:
          content:
            application/json:
              example:
                data:
                  enabled: true
              schema:
                properties:
                  data:
                    properties:
                      enabled:
                        type: boolean
          description: success
      summary: Set dependency restriction configuration
      tags:
      - depends

security:
- bearerAuth: []
servers:
- url: http://127.0.0.1/api/v1
tags:
- name: systems
- name: users
- name: authentication
- name: event
- name: devicedb
- name: apps
- name: job
- name: upgrade
- name: hardware
- name: security
